(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[6],{504:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var n=a(417),r=a(482),o=a(488),c=a(476),i=a(489),l=a(0),d=a.n(l),s=Object(n.a)((function(e){return{search:{margin:e.spacing(1),marginTop:0}}})),u=function(e){var t=e.label,a=e.onChange,n=e.defaultValue,c=s();return d.a.createElement(r.a,{className:c.search,size:"small",label:t,InputProps:{onChange:function(e){var t=e.target.value;a&&a(t)},defaultValue:n,endAdornment:d.a.createElement(o.a,{position:"end"},d.a.createElement(i.a,null))}})},m=function(e){var t=e.label,a=e.onChange,n=e.options,o=s();return d.a.createElement(r.a,{className:o.search,size:"small",label:t,select:!0,SelectProps:{onChange:function(e){var t=e.target.value;a&&a(t)},style:{width:100}}},d.a.createElement(c.a,{value:""},"All"),n.map((function(e){return"string"===typeof e?d.a.createElement(c.a,{value:e},e):d.a.createElement(c.a,{value:e[0]},e[1])})))}},505:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e<1024?"".concat(e,"KB"):e<Math.pow(1024,2)?"".concat((e/Math.pow(1024,1)).toFixed(2),"KB"):e<Math.pow(1024,3)?"".concat((e/Math.pow(1024,2)).toFixed(2),"MB"):e<Math.pow(1024,4)?"".concat((e/Math.pow(1024,3)).toFixed(2),"GB"):e<Math.pow(1024,5)?"".concat((e/Math.pow(1024,4)).toFixed(2),"TB"):e<Math.pow(1024,6)?"".concat((e/Math.pow(1024,5)).toFixed(2),"TB"):""}},508:function(e,t,a){"use strict";var n=a(417),r=a(0),o=a.n(r),c=Object(n.a)((function(e){return{container:{background:"linear-gradient(45deg, #21CBF3ee 30%, #2196F3ee 90%)",border:"1px solid #ffffffbb",padding:"0 12px",height:18,lineHeight:"18px",position:"relative",boxSizing:"content-box",borderRadius:4},displayBar:{background:e.palette.background.paper,position:"absolute",right:0,height:18,transition:"0.5s width",borderRadius:2,borderTopLeftRadius:0,borderBottomLeftRadius:0,border:"2px solid transparent",boxSizing:"border-box"},text:{fontSize:12,zIndex:2,position:"relative",color:e.palette.text.primary,width:"100%",textAlign:"center"}}}));t.a=function(e){var t=e.num,a=e.total,n=c(),r=Math.round(t/a*100);return o.a.createElement("div",{className:n.container},o.a.createElement("div",{className:n.displayBar,style:{width:"".concat(Math.min(Math.max(0,100-r),100),"%")}}),o.a.createElement("div",{className:n.text},e.children))}},509:function(e,t,a){"use strict";var n=a(7),r=a(466),o=a(0),c=a.n(o),i=a(105);t.a=function(e){var t=e.type,a=e.list,o={};return a.forEach((function(e){var t=e.state;o[t]=o[t]+1||1})),c.a.createElement(r.a,{container:!0,spacing:2,alignItems:"center"},c.a.createElement(r.a,{item:!0},c.a.createElement(i.a,{status:"TOTAL",type:t,suffix:"x ".concat(a.length)})),Object.entries(o).map((function(e){var a=Object(n.a)(e,2),o=a[0],l=a[1];return c.a.createElement(r.a,{item:!0},c.a.createElement(i.a,{status:o,type:t,suffix:" x ".concat(l)}))})))}},510:function(e,t,a){"use strict";var n=a(429),r=a(474),o=a(0),c=a.n(o);t.a=function(e){var t=e.loading;return c.a.createElement(n.a,{open:t,style:{zIndex:100}},c.a.createElement(r.a,{color:"primary"}))}},512:function(e,t,a){"use strict";var n=a(1),r=a(2),o=a(0),c=(a(5),a(3)),i=a(4),l=o.forwardRef((function(e,t){var a=e.classes,i=e.className,l=e.component,d=void 0===l?"div":l,s=Object(r.a)(e,["classes","className","component"]);return o.createElement(d,Object(n.a)({ref:t,className:Object(c.a)(a.root,i)},s))}));t.a=Object(i.a)({root:{width:"100%",overflowX:"auto"}},{name:"MuiTableContainer"})(l)},513:function(e,t,a){"use strict";var n=a(1),r=a(2),o=a(0),c=(a(5),a(3)),i=a(4),l=a(8),d=a(6),s=a(108),u=o.forwardRef((function(e,t){var a=e.classes,i=e.className,l=e.color,u=void 0===l?"secondary":l,m=e.edge,p=void 0!==m&&m,b=e.size,g=void 0===b?"medium":b,h=Object(r.a)(e,["classes","className","color","edge","size"]),f=o.createElement("span",{className:a.thumb});return o.createElement("span",{className:Object(c.a)(a.root,i,{start:a.edgeStart,end:a.edgeEnd}[p],"small"===g&&a["size".concat(Object(d.a)(g))])},o.createElement(s.a,Object(n.a)({type:"checkbox",icon:f,checkedIcon:f,classes:{root:Object(c.a)(a.switchBase,a["color".concat(Object(d.a)(u))]),input:a.input,checked:a.checked,disabled:a.disabled},ref:t},h)),o.createElement("span",{className:a.track}))}));t.a=Object(i.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(l.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(l.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(u)},521:function(e,t,a){"use strict";a.r(t),a.d(t,"brpcLinkChanger",(function(){return K})),a.d(t,"NodeCard",(function(){return X}));var n=a(152),r=a(466),o=a(477),c=a(513),i=a(1),l=a(2),d=a(0),s=a.n(d),u=(a(49),a(5),a(3)),m=a(6),p=a(8),b=a(4);o.a.styles;var g=d.forwardRef((function(e,t){var a=e.children,n=e.classes,r=e.className,o=e.color,c=void 0===o?"default":o,s=e.component,p=void 0===s?"div":s,b=e.disabled,g=void 0!==b&&b,h=e.disableElevation,f=void 0!==h&&h,E=e.disableFocusRipple,y=void 0!==E&&E,v=e.disableRipple,O=void 0!==v&&v,j=e.fullWidth,k=void 0!==j&&j,x=e.orientation,S=void 0===x?"horizontal":x,w=e.size,C=void 0===w?"medium":w,R=e.variant,N=void 0===R?"outlined":R,z=Object(l.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"]),M=Object(u.a)(n.grouped,n["grouped".concat(Object(m.a)(S))],n["grouped".concat(Object(m.a)(N))],n["grouped".concat(Object(m.a)(N)).concat(Object(m.a)(S))],n["grouped".concat(Object(m.a)(N)).concat("default"!==c?Object(m.a)(c):"")],g&&n.disabled);return d.createElement(p,Object(i.a)({role:"group",className:Object(u.a)(n.root,r,k&&n.fullWidth,f&&n.disableElevation,"contained"===N&&n.contained,"vertical"===S&&n.vertical),ref:t},z),d.Children.map(a,(function(e){return d.isValidElement(e)?d.cloneElement(e,{className:Object(u.a)(M,e.props.className),color:e.props.color||c,disabled:e.props.disabled||g,disableElevation:e.props.disableElevation||f,disableFocusRipple:y,disableRipple:O,fullWidth:k,size:e.props.size||C,variant:e.props.variant||N}):null})))})),h=Object(b.a)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},contained:{boxShadow:e.shadows[2]},disableElevation:{boxShadow:"none"},disabled:{},fullWidth:{width:"100%"},vertical:{flexDirection:"column"},grouped:{minWidth:40},groupedHorizontal:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{borderTopRightRadius:0,borderTopLeftRadius:0},"&:not(:last-child)":{borderBottomRightRadius:0,borderBottomLeftRadius:0}},groupedText:{},groupedTextHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextPrimary:{"&:not(:last-child)":{borderColor:Object(p.c)(e.palette.primary.main,.5)}},groupedTextSecondary:{"&:not(:last-child)":{borderColor:Object(p.c)(e.palette.secondary.main,.5)}},groupedOutlined:{},groupedOutlinedHorizontal:{"&:not(:first-child)":{marginLeft:-1},"&:not(:last-child)":{borderRightColor:"transparent"}},groupedOutlinedVertical:{"&:not(:first-child)":{marginTop:-1},"&:not(:last-child)":{borderBottomColor:"transparent"}},groupedOutlinedPrimary:{"&:hover":{borderColor:e.palette.primary.main}},groupedOutlinedSecondary:{"&:hover":{borderColor:e.palette.secondary.main}},groupedContained:{boxShadow:"none"},groupedContainedHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderRight:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderBottom:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedPrimary:{"&:not(:last-child)":{borderColor:e.palette.primary.dark}},groupedContainedSecondary:{"&:not(:last-child)":{borderColor:e.palette.secondary.dark}}}}),{name:"MuiButtonGroup"})(g),f=a(512),E=a(472),y=a(470),v=a(471),O=a(469),j=a(473),k=a(467),x=a(417),S=a(494),w=a(62),C=a(510),R=a(508),N=a(504),z=a(509),M=a(105),B=a(106),I=a(505),$=a(24),T=a(15),L=a(13),P=a.n(L),F=a(17),U=a(81),A=a(7),D=a(111),W=a(107),V=Object(x.a)((function(e){return{root:{padding:e.spacing(2),width:"100%",position:"relative"}}})),H=["State","ID","Host","IP","CPU Usage","Memory","Object Store Memory","Disk(root)","Sent","Received","Log"],K=function(e){var t=window.location,a=t.pathname.split("/");if(a.some((function(e){return e.split(".").length>1}))){var n=a.findIndex((function(e){return e.includes(".")})),r=a.slice(0,n);return r.push(e),"".concat(t.protocol,"//").concat(t.host).concat(r.join("/"))}return"http://".concat(e)},X=function(e){var t=e.node;if(!t)return null;var a=t.raylet,c=t.hostname,i=t.ip,l=t.cpu,d=t.mem,u=t.networkSpeed,m=t.disk,p=t.logUrl,b=a.nodeId,g=a.state,h=a.objectStoreUsedMemory,f=a.objectStoreAvailableMemory;return s.a.createElement(n.a,{variant:"outlined",style:{padding:"12px 12px",margin:12}},s.a.createElement("p",{style:{fontWeight:"bold",fontSize:12,textDecoration:"none"}},s.a.createElement(w.b,{to:"node/".concat(b)},b)," "),s.a.createElement("p",null,s.a.createElement(r.a,{container:!0,spacing:1},s.a.createElement(r.a,{item:!0},s.a.createElement(M.a,{type:"node",status:g})),s.a.createElement(r.a,{item:!0},c,"(",i,")"),u&&u[0]>=0&&s.a.createElement(r.a,{item:!0},s.a.createElement("span",{style:{fontWeight:"bold"}},"Sent")," ",Object(I.a)(u[0]),"/s"," ",s.a.createElement("span",{style:{fontWeight:"bold"}},"Received")," ",Object(I.a)(u[1]),"/s"))),s.a.createElement(r.a,{container:!0,spacing:1,alignItems:"baseline"},l>=0&&s.a.createElement(r.a,{item:!0,xs:!0},"CPU",s.a.createElement(R.a,{num:Number(l),total:100},l,"%")),d&&s.a.createElement(r.a,{item:!0,xs:!0},"Memory",s.a.createElement(R.a,{num:Number(d[0]-d[1]),total:d[0]},Object(I.a)(d[0]-d[1]),"/",Object(I.a)(d[0]),"(",d[2],"%)")),a&&s.a.createElement(r.a,{item:!0,xs:!0},"Object Store Memory",s.a.createElement(R.a,{num:h,total:f},Object(I.a)(h),"/",Object(I.a)(f))),m&&m["/"]&&s.a.createElement(r.a,{item:!0,xs:!0},"Disk('/')",s.a.createElement(R.a,{num:Number(m["/"].used),total:m["/"].total},Object(I.a)(m["/"].used),"/",Object(I.a)(m["/"].total),"(",m["/"].percent,"%)"))),s.a.createElement(r.a,{container:!0,justify:"flex-end",spacing:1,style:{margin:8}},s.a.createElement(r.a,null,s.a.createElement(o.a,null,s.a.createElement(w.b,{to:"/log/".concat(encodeURIComponent(p))},"log")))))};t.default=function(){var e=V(),t=function(){var e=Object(d.useState)([]),t=Object(A.a)(e,2),a=t[0],n=t[1],r=Object(d.useState)("Loading the nodes infos..."),o=Object(A.a)(r,2),c=o[0],i=o[1],l=Object(d.useState)(!0),s=Object(A.a)(l,2),u=s[0],m=s[1],p=Object(d.useState)("table"),b=Object(A.a)(p,2),g=b[0],h=b[1],f=Object(d.useState)([]),E=Object(A.a)(f,2),y=E[0],v=E[1],O=Object(d.useState)({pageSize:10,pageNo:1}),j=Object(A.a)(O,2),k=j[0],x=j[1],S=Object(W.b)("cpu"),w=S.sorterFunc,C=S.setOrderDesc,R=S.setSortKey,N=S.sorterKey,z=Object(d.useRef)(),M=Object(d.useCallback)(Object(F.a)(P.a.mark((function e(){var t,a,r,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(D.b)();case 4:t=e.sent,a=t.data,r=a.data,o=a.msg,n(r.summary||[]),i(o||""),z.current=setTimeout(M,4e3);case 10:case"end":return e.stop()}}),e)}))),[u]);return Object(d.useEffect)((function(){return M(),function(){z.current&&clearTimeout(z.current)}}),[M]),{nodeList:a.map((function(e){return Object(T.a)(Object(T.a)({},e),{},{state:e.raylet.state})})).sort((function(e,t){return e.raylet.nodeId>t.raylet.nodeId?1:-1})).sort(w).filter((function(e){return y.every((function(t){return e[t.key]&&e[t.key].includes(t.val)}))})),msg:c,isRefreshing:u,onSwitchChange:function(e){m(e.target.checked)},changeFilter:function(e,t){var a=y.find((function(t){return t.key===e}));a?a.val=t:y.push({key:e,val:t}),v(Object(U.a)(y))},page:k,originalNodes:a,setPage:function(e,t){return x(Object(T.a)(Object(T.a)({},k),{},Object($.a)({},e,t)))},sorterKey:N,setSortKey:R,setOrderDesc:C,mode:g,setMode:h}}(),a=t.msg,n=t.isRefreshing,i=t.onSwitchChange,l=t.nodeList,u=t.changeFilter,m=t.page,p=t.setPage,b=t.setSortKey,g=t.setOrderDesc,x=t.mode,L=t.setMode;return s.a.createElement("div",{className:e.root},s.a.createElement(C.a,{loading:a.startsWith("Loading")}),s.a.createElement(B.a,{title:"NODES"},"Auto Refresh:",s.a.createElement(c.a,{checked:n,onChange:i,name:"refresh",inputProps:{"aria-label":"secondary checkbox"}}),s.a.createElement("br",null),"Request Status: ",a),s.a.createElement(B.a,{title:"Statistics"},s.a.createElement(z.a,{type:"node",list:l})),s.a.createElement(B.a,{title:"Node List"},s.a.createElement(r.a,{container:!0,alignItems:"center"},s.a.createElement(r.a,{item:!0},s.a.createElement(N.a,{label:"Host",onChange:function(e){return u("hostname",e.trim())}})),s.a.createElement(r.a,{item:!0},s.a.createElement(N.a,{label:"IP",onChange:function(e){return u("ip",e.trim())}})),s.a.createElement(r.a,{item:!0},s.a.createElement(N.b,{label:"State",onChange:function(e){return u("state",e.trim())},options:["ALIVE","DEAD"]})),s.a.createElement(r.a,{item:!0},s.a.createElement(N.a,{label:"Page Size",onChange:function(e){return p("pageSize",Math.min(Number(e),500)||10)}})),s.a.createElement(r.a,{item:!0},s.a.createElement(N.b,{label:"Sort By",options:[["state","State"],["mem[2]","Used Memory"],["mem[0]","Total Memory"],["cpu","CPU"],["networkSpeed[0]","Sent"],["networkSpeed[1]","Received"],["disk./.used","Used Disk"]],onChange:function(e){return b(e)}})),s.a.createElement(r.a,{item:!0},s.a.createElement("span",{style:{margin:8,marginTop:0}},"Reverse:",s.a.createElement(c.a,{onChange:function(e,t){return g(t)}}))),s.a.createElement(r.a,{item:!0},s.a.createElement(h,{size:"small"},s.a.createElement(o.a,{onClick:function(){return L("table")},color:"table"===x?"primary":"default"},"Table"),s.a.createElement(o.a,{onClick:function(){return L("card")},color:"card"===x?"primary":"default"},"Card")))),s.a.createElement("div",null,s.a.createElement(S.a,{count:Math.ceil(l.length/m.pageSize),page:m.pageNo,onChange:function(e,t){return p("pageNo",t)}})),"table"===x&&s.a.createElement(f.a,null,s.a.createElement(E.a,null,s.a.createElement(y.a,null,s.a.createElement(v.a,null,H.map((function(e){return s.a.createElement(O.a,{align:"center",key:e},e)})))),s.a.createElement(j.a,null,l.slice((m.pageNo-1)*m.pageSize,m.pageNo*m.pageSize).map((function(e,t){var a=e.hostname,n=void 0===a?"":a,r=e.ip,o=void 0===r?"":r,c=e.cpu,i=void 0===c?0:c,l=e.mem,d=void 0===l?[]:l,u=e.disk,m=e.networkSpeed,p=void 0===m?[0,0]:m,b=e.raylet,g=e.logUrl;return s.a.createElement(v.a,{key:n+t},s.a.createElement(O.a,null,s.a.createElement(M.a,{type:"node",status:b.state})),s.a.createElement(O.a,{align:"center"},s.a.createElement(k.a,{title:b.nodeId,arrow:!0,interactive:!0},s.a.createElement(w.b,{to:"/node/".concat(b.nodeId)},b.nodeId.slice(0,5)))),s.a.createElement(O.a,{align:"center"},n),s.a.createElement(O.a,{align:"center"},o),s.a.createElement(O.a,null,s.a.createElement(R.a,{num:Number(i),total:100},i,"%")),s.a.createElement(O.a,null,s.a.createElement(R.a,{num:Number(d[0]-d[1]),total:d[0]},Object(I.a)(d[0]-d[1]),"/",Object(I.a)(d[0]),"(",d[2],"%)")),s.a.createElement(O.a,null,b&&s.a.createElement(R.a,{num:b.objectStoreUsedMemory,total:b.objectStoreAvailableMemory},Object(I.a)(b.objectStoreUsedMemory),"/",Object(I.a)(b.objectStoreAvailableMemory))),s.a.createElement(O.a,null,u&&u["/"]&&s.a.createElement(R.a,{num:Number(u["/"].used),total:u["/"].total},Object(I.a)(u["/"].used),"/",Object(I.a)(u["/"].total),"(",u["/"].percent,"%)")),s.a.createElement(O.a,{align:"center"},Object(I.a)(p[0]),"/s"),s.a.createElement(O.a,{align:"center"},Object(I.a)(p[1]),"/s"),s.a.createElement(O.a,null,s.a.createElement(w.b,{to:"/log/".concat(encodeURIComponent(g))},"Log")))}))))),"card"===x&&s.a.createElement(r.a,{container:!0},l.slice((m.pageNo-1)*m.pageSize,m.pageNo*m.pageSize).map((function(e){return s.a.createElement(r.a,{item:!0,xs:6},s.a.createElement(X,{node:e}))})))))}}}]);
//# sourceMappingURL=6.1c5e537f.chunk.js.map