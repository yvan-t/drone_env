(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[0],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a,r,o=n(24),c=n(95),i=n(92),l=n(94),s=n(484),u=n(91),m=n(485),d=n(486),p=n(0),f=n.n(p);!function(e){e.ALIVE="ALIVE",e.PENDING="PENDING",e.RECONSTRUCTING="RECONSTRUCTING",e.DEAD="DEAD"}(a||(a={}));var b={node:{ALIVE:c.a,DEAD:i.a},actor:(r={},Object(o.a)(r,a.ALIVE,c.a),Object(o.a)(r,a.DEAD,i.a),Object(o.a)(r,a.PENDING,l.a),Object(o.a)(r,a.RECONSTRUCTING,s.a),r),job:{INIT:u.a,SUBMITTED:l.a,DISPATCHED:s.a,RUNNING:c.a,COMPLETED:m.a,FINISHED:m.a,FAILED:i.a}},g={deps:l.a,INFO:m.a,ERROR:i.a},v=function(e){var t=e.type,n=e.status,a=e.suffix,r={padding:"2px 8px",border:"solid 1px",borderRadius:4,fontSize:12,margin:2},o=d.a;return g[t]?o=g[t]:"string"===typeof n&&b[t]&&b[t][n]&&(o=b[t][n]),r.color=o[500],r.borderColor=o[500],o!==d.a&&(r.backgroundColor="".concat(o[500],"20")),f.a.createElement("span",{style:r},n,a)}},106:function(e,t,n){"use strict";var a=n(417),r=n(152),o=n(0),c=n.n(o),i=Object(a.a)((function(e){return{card:{padding:e.spacing(2),paddingTop:e.spacing(1.5),margin:[e.spacing(2),e.spacing(1)].map((function(e){return"".concat(e,"px")})).join(" ")},title:{fontSize:e.typography.fontSize+2,fontWeight:500,color:e.palette.text.secondary,marginBottom:e.spacing(1)},body:{padding:e.spacing(.5)}}}));t.a=function(e){var t=e.title,n=e.children,a=i();return c.a.createElement(r.a,{className:a.card},c.a.createElement("div",{className:a.title},t),c.a.createElement("div",{className:a.body},n))}},107:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n(15),r=n(81),o=n(7),c=n(74),i=n(0),l=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1];return{changeFilter:function(e,t){var o=n.find((function(t){return t.key===e}));o?o.val=t:n.push({key:e,val:t}),a(Object(r.a)(n))},filterFunc:function(e){return n.every((function(t){return!t.val||Object(c.get)(e,t.key,"").toString().includes(t.val)}))}}},s=function(e){var t=Object(i.useState)({key:e||"",desc:!1}),n=Object(o.a)(t,2),r=n[0],l=n[1];return{sorterFunc:function(e,t){if(!r.key)return 0;var n=e,a=t;return r.desc&&(a=e,n=t),Object(c.get)(a,r.key)?Object(c.get)(n,r.key)?Object(c.get)(a,r.key)>Object(c.get)(n,r.key)?1:-1:1:-1},setSortKey:function(e){return l(Object(a.a)(Object(a.a)({},r),{},{key:e}))},setOrderDesc:function(e){return l(Object(a.a)(Object(a.a)({},r),{},{desc:e}))},sorterKey:r.key}}},111:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l}));var a=n(13),r=n.n(a),o=n(17),c=n(60),i=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)("nodes?view=summary");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)("nodes/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},113:function(e,t,n){"use strict";var a=n(15),r=n(7),o=n(57),c=n.n(o),i=n(146),l=n.n(i),s=n(0),u=n.n(s),m=n(149),d=(n(414),n(415),n(416),n(77)),p=function(){return Math.random().toString(16).slice(-8)},f=/(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)\s+([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/,b=function e(t,n){var a=t.type,r=t.tagName,o=t.properties,c=t.children,i=t.value,l=void 0===i?"":i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(a){case"element":return u.a.createElement(r,{className:o.className[0],key:"".concat(n,"line").concat(p())},c.map((function(t,a){return e(t,"".concat(n,"-").concat(a),s)})));case"text":if(s&&l.includes(s)){var m=[],d=l.split(s),f=d.shift();if(!f)return u.a.createElement("span",{className:"find-kws"},s);for(;"string"===typeof f;)""!==f?m.push(f):m.push(u.a.createElement("span",{className:"find-kws"},s)),(f=d.shift())&&m.push(u.a.createElement("span",{className:"find-kws"},s));return m}return l;default:return[]}};t.a=function(e){var t=e.content,n=e.width,o=void 0===n?"100%":n,i=e.height,p=e.fontSize,g=void 0===p?12:p,v=e.theme,h=void 0===v?Object(d.c)():v,E=e.keywords,y=void 0===E?"":E,j=e.language,O=void 0===j?"dos":j,k=e.focusLine,S=void 0===k?1:k,N=e.style,C=void 0===N?{}:N,x=e.listRef,w=e.onScrollBottom,T=e.revert,I=void 0!==T&&T,F=e.startTime,R=e.endTime,A=Object(s.useState)([]),L=Object(r.a)(A,2),M=L[0],D=L[1],z=M.length,P=Object(s.useRef)(),W=Object(s.useRef)(null),U=Object(s.useRef)(null);x&&(x.current=U.current);var B=function(e){var t=e.index,n=e.style,r=M[I?M.length-1-t:t],o=r.i,c=r.origin;return u.a.createElement("div",{key:"".concat(t,"list"),style:Object(a.a)(Object(a.a)({},n),{},{overflowX:"visible",whiteSpace:"pre"})},u.a.createElement("span",{style:{marginRight:4,width:6*"".concat(M.length).length+4,color:"#999",display:"inline-block"}},o+1),l.a.highlight(O,c).value.map((function(e){return b(e,t.toString(),y)})))};return Object(s.useEffect)((function(){var e=t.split("\n");P.current&&clearTimeout(P.current),P.current=setTimeout((function(){D(e.map((function(e,t){return{i:t,origin:e,time:((null===e||void 0===e?void 0:e.match(f))||[""])[0]}})).filter((function(e){var t=e.origin.includes(y);return e.time&&F&&!c()(e.time).isAfter(c()(F))&&(t=!1),e.time&&R&&!c()(e.time).isBefore(c()(R))&&(t=!1),t})).map((function(e){return Object(a.a)({},e)})))}),500)}),[t,y,O,F,R]),Object(s.useEffect)((function(){var e;W.current&&(null===(e=W.current)||void 0===e||e.scrollTo((S-1)*(g+6)))}),[S,g]),Object(s.useEffect)((function(){var e=null;if(U.current){var t=function(t){var n=t.target;n&&n.scrollTop+n.clientHeight===n.scrollHeight&&w&&w(t),e=U.current};return U.current.addEventListener("scroll",t),function(){e&&e.removeEventListener("scroll",t)}}}),[w]),u.a.createElement(m.a,{height:i||18*(t.split("\n").length+1),width:o,ref:W,outerRef:U,className:"hljs-".concat(h),style:Object(a.a)({fontSize:g,fontFamily:"menlo, monospace"},C),itemSize:g+6,itemCount:z},B)}},129:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.3704c1bb.svg"},158:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),i=(n(174),n(77));c.a.render(r.a.createElement(i.b,null),document.getElementById("root"))},414:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var a=n(65),r=n.n(a),o=function(e){return e.startsWith("/")?e.slice(1):e},c=function(e,t){return r.a.get(o(e),t)}},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return ur})),n.d(t,"c",(function(){return mr}));var a,r=n(7),o=n(491),c=n(490),i=n(0),l=n.n(i),s=n(16),u=n(62),m=n(56),d=n(13),p=n.n(d),f=n(17),b=n(417),g=n(499),v=n(102),h=n(477),E=n(493),y=n(483),j=n(495),O=n(60),k=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a,r,o,c,i,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.entries(n).map((function(e){return e.join("=")})).join("&"),r=[Object(O.a)(t),a].filter((function(e){return e})).join("?"),e.next=4,fetch(r);case 4:return o=e.sent,e.next=7,o.json();case 7:if(c=e.sent,i=c.result,l=c.msg,s=c.data,i){e.next=11;break}throw Error(l);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function S(e){return e.state!==a.Infeasible&&e.state!==a.PendingResources}!function(e){e.Infeasible="INFEASIBLE",e.PendingResources="PENDING_RESOURCES",e.DependenciesUnready="PENDING",e.PendingCreation="CREATING",e.Alive="ALIVE",e.Restarting="RESTARTING",e.Dead="DEAD"}(a||(a={}));var N,C=function(e,t){return k("/node_errors",{nodeIp:e,pid:null!==t&&void 0!==t?t:""})},x=function(e,t){return k("/node_logs",{ip:e,pid:null!==t&&void 0!==t?t:""})},w=function(e,t,n){return k("/api/launch_profiling",{node_id:e,pid:t,duration:n})},T=function(e){var t=encodeURIComponent(Object(O.a)("/api/get_profiling_info?profiling_id=".concat(e)));return Object(O.a)("/speedscope/index.html#profileURL=".concat(t))},I=function(){return k("/tune/info",{})},F=function(e){return k("/tune/set_experiment",{experiment:e})},R=function(){return k("/tune/enable_tensorboard",{})},A=function(e){return k("/memory/set_fetch",{shouldFetch:e})},L=n(19),M=n(20),D=n(22),z=n(21),P=n(4),W=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.lastUpdatedAt,a=e.error;return l.a.createElement("div",{className:t.root},null!==n&&l.a.createElement(v.a,{className:t.lastUpdated},"Last updated: ",new Date(n).toLocaleString()),null!==a&&l.a.createElement(v.a,{className:t.error},a))}}]),n}(l.a.Component),U=Object(s.b)((function(e){return{lastUpdatedAt:e.dashboard.lastUpdatedAt,error:e.dashboard.error}}))(Object(P.a)((function(e){return Object(g.a)({root:{marginTop:e.spacing(2)},lastUpdated:{color:e.palette.text.secondary,fontSize:"0.8125rem",textAlign:"center"},error:{color:e.palette.error.main,fontSize:"0.8125rem",textAlign:"center"}})}))(W)),B=n(492),G=n(422),_=n(423),H=n(425),V=n(426),J=n(502),q=n(498),Y=function(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0},K=function(e,t,n){var a=n(e),r=n(t);return r<a?-1:r>a?1:0},X=function(e,t){return function(n,a){return"desc"===e?K(n,a,t):-K(n,a,t)}},Q=function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))},Z=n(36),$=function(e){if(0===e.length)return 0;var t,n=0,a=0,r=Object(Z.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,c=o.weight;n+=c*o.value,a+=c}}catch(i){r.e(i)}finally{r.f()}return n/a},ee=function(e){return e.reduce((function(e,t){return e+t}),0)},te=n(148),ne=n(152),ae=n(466),re=n(134),oe=n.n(re),ce=n(135),ie=n.n(ce),le=function(e){var t=e.onClick;return l.a.createElement(oe.a,{onClick:t})},se=function(e){var t=e.onClick;return l.a.createElement(ie.a,{onClick:t})},ue=n(467),me=Object(b.a)({tooltipLabel:{textDecorationLine:"underline",textDecorationColor:"#a6c3e3",textDecorationThickness:"1px",textDecorationStyle:"dotted",cursor:"help"}}),de=function(e){var t=e.label,n=e.datum,a=e.tooltip,r=me(),o=l.a.createElement(ae.a,{container:!0,item:!0,xs:12},l.a.createElement(ae.a,{item:!0,xs:6},l.a.createElement(B.a,{className:a&&r.tooltipLabel},t)),l.a.createElement(ae.a,{item:!0,xs:6},l.a.createElement("span",null,n)));return a?l.a.createElement(ue.a,{title:a},o):o},pe=n(24),fe=n(15),be=n(468),ge=Object(b.a)((function(e){return Object(g.a)({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1,display:"flex",flexGrow:1},inner:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}})})),ve=function(e){var t=e.percent,n=e.text,a=ge(),o=Math.max(Math.min(t,100),0),c=[0,255,0],i=c,s=function(e,t,n){var a=Object(r.a)(e,3),o=a[0],c=a[1],i=a[2],l=Object(r.a)(t,3);return[o*(1-n)+l[0]*n,c*(1-n)+l[1]*n,i*(1-n)+l[2]*n]}(c,[255,0,0],o/100),u="\n    linear-gradient(\n      to right,\n      rgba(".concat(i.join(","),", ").concat(.2,") 0%,\n      rgba(").concat(s.join(","),", ").concat(.2,") ").concat(o,"%,\n      transparent ").concat(o,"%\n    )\n  ");return l.a.createElement("span",{className:a.root},l.a.createElement("span",{className:a.inner,style:{background:u,flexGrow:1}},l.a.createElement(v.a,{align:"center"},n)))},he=a.Alive,Ee=a.Dead,ye=a.PendingCreation,je=a.Restarting,Oe=a.DependenciesUnready,ke=a.Infeasible,Se=a.PendingResources,Ne=Object(b.a)((function(e){return Object(g.a)({infeasible:{color:e.palette.error.light},pendingResources:{color:e.palette.warning.light},unknown:{color:e.palette.warning.light},creating:{color:e.palette.success.light},alive:{color:e.palette.success.dark},restarting:{color:e.palette.warning.light},dead:{color:"#cccccc"},tooltip:{cursor:"help"}})})),Ce=(N={},Object(pe.a)(N,he,"The actor is alive and handling remote calls."),Object(pe.a)(N,Ee,"The actor is dead and will not be restarted anymore."),Object(pe.a)(N,ke,"The actor cannot be created because of insufficient resources in the cluster. Please examine its resource constraints to make sure they are correct or add additional compute to your cluster."),Object(pe.a)(N,je,"The actor died and is restarting."),Object(pe.a)(N,ye,"The actor's resources and other dependencies are ready, and the Ray backend is processing its creation."),Object(pe.a)(N,Oe,"The actor is pending creation because it is waiting for one or more of its initialization arguments to be ready."),Object(pe.a)(N,Se,"The actor is pending resources, such as GPU, Memory, or CPU. It will be created when they become available."),N),xe=function(e){var t,n=e.state,a=e.variant,r=e.showTooltip,o=Ne(),c=null!==a&&void 0!==a?a:"body1";switch(n){case ke:t=l.a.createElement(v.a,{variant:c,className:o.infeasible},"Infeasible");break;case Se:t=l.a.createElement(v.a,{variant:c,className:o.pendingResources},"Pending Resources");break;case ye:t=l.a.createElement(v.a,{variant:c,className:o.creating},"Creating");break;case Oe:t=l.a.createElement(v.a,{variant:c,className:o.creating},"Dependencies Unready");break;case he:t=l.a.createElement(v.a,{variant:c,className:o.alive},"Alive");break;case je:t=l.a.createElement(v.a,{variant:c,className:o.restarting},"Restarting");break;case Ee:t=l.a.createElement(v.a,{variant:c,className:o.dead},"Dead")}return r?l.a.createElement(ue.a,{className:o.tooltip,title:Ce[n]},t):t},we="https://docs.ray.io/en/master/memory-management.html#debugging-using-ray-memory",Te=Object(b.a)((function(e){return{divider:{width:"100%",margin:"0 auto"},actorTitleWrapper:{marginTop:e.spacing(1),marginBottom:e.spacing(1),fontWeight:"bold",fontSize:"130%"},detailsPane:{margin:e.spacing(1)}}})),Ie=function(e){var t,n,a,o,c=e.actor,i=Te(),s=function(e){var t,n,a,o,c,i,l,s,u,m;return S(e)?[{label:"Resources",value:e.usedResources&&Object.entries(e.usedResources).length>0&&Object.entries(e.usedResources).sort((function(e,t){return e[0].localeCompare(t[0])})).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return"".concat(ee(a.resourceSlots.map((function(e){return e.allocation})))," ").concat(n)})).join(", ")},{label:"Number of pending tasks",value:null!==(t=null===(n=e.taskQueueLength)||void 0===n?void 0:n.toLocaleString())&&void 0!==t?t:"0",tooltip:"The number of tasks that are currently pending to execute on this actor. If this number remains consistently high, it may indicate that this actor is a bottleneck in your application."},{label:"Number of executed tasks",value:null!==(a=null===(o=e.numExecutedTasks)||void 0===o?void 0:o.toLocaleString())&&void 0!==a?a:"0",tooltip:"The number of tasks this actor has executed throughout its lifetimes."},{label:"Number of ObjectRefs in scope",value:null!==(c=null===(i=e.numObjectRefsInScope)||void 0===i?void 0:i.toLocaleString())&&void 0!==c?c:"0",tooltip:"The number of ObjectRefs that this actor is keeping in scope via its internal state. This does not imply that the objects are in active use or colocated on the node with the actor "+"currently. This can be useful for debugging memory leaks. See the docs at ".concat(we," ")+"for more information."},{label:"Number of local objects",value:null!==(l=null===(s=e.numLocalObjects)||void 0===s?void 0:s.toLocaleString())&&void 0!==l?l:"0",tooltip:"The number of small objects that this actor has stored in its local in-process memory store. This can be useful for "+"debugging memory leaks. See the docs at ".concat(we," for more information")},{label:"Object store memory used (MiB)",value:null!==(u=null===(m=e.usedObjectStoreMemory)||void 0===m?void 0:m.toLocaleString())&&void 0!==u?u:"0",tooltip:"The total amount of memory that this actor is occupying in the Ray object store. If this number is increasing without bounds, you might have a memory leak. See "+"the docs at: ".concat(we," for more information.")}]:[{label:"Actor ID",value:e.actorId,tooltip:""},{label:"Required resources",value:e.requiredResources&&Object.entries(e.requiredResources).length>0&&Object.entries(e.requiredResources).sort((function(e,t){return e[0].localeCompare(t[0])})).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return"".concat(a.toLocaleString()," ").concat(n)})).join(", "),tooltip:""}]}(c);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:i.actorTitleWrapper},l.a.createElement("div",null,c.actorClass),l.a.createElement(xe,{state:c.state})),S(c)&&l.a.createElement(ae.a,{container:!0,spacing:3,className:i.detailsPane},l.a.createElement(ae.a,{container:!0,item:!0,xs:6},l.a.createElement(ae.a,{item:!0,xs:4},l.a.createElement(v.a,null,"CPU Usage")),l.a.createElement(ae.a,{item:!0,xs:4},l.a.createElement(ve,{percent:null!==(t=null===(n=c.processStats)||void 0===n?void 0:n.cpuPercent)&&void 0!==t?t:0,text:"".concat(null!==(a=null===(o=c.processStats)||void 0===o?void 0:o.cpuPercent)&&void 0!==a?a:0,"%")})),l.a.createElement(ae.a,{item:!0,xs:4})),c.gpus.length>0&&l.a.createElement(ae.a,{container:!0,item:!0,xs:6},l.a.createElement(ae.a,{item:!0,xs:12},l.a.createElement(v.a,null,"GPU Usage")),c.gpus.map((function(e){var t=e.utilizationGpu?l.a.createElement(ve,{percent:100*e.utilizationGpu,text:"".concat(100*e.utilizationGpu,"%")}):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A");return l.a.createElement(l.a.Fragment,{key:e.uuid},l.a.createElement(ae.a,{item:!0,xs:4},"[".concat(e.name,"]")),l.a.createElement(ae.a,{item:!0,xs:4},t),l.a.createElement(ae.a,{item:!0,xs:4}))})))),l.a.createElement(be.a,{className:i.divider}),l.a.createElement(ae.a,{container:!0,className:i.detailsPane},s.map((function(e){var t=e.label,n=e.value,a=e.tooltip;return n&&n.length>0&&l.a.createElement(de,{key:t,label:t,datum:n,tooltip:a})}))))},Fe=Object(b.a)((function(e){return Object(g.a)({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1,marginTop:e.spacing(2),padding:e.spacing(2),width:"100%"},title:{color:e.palette.text.secondary,fontSize:"0.75rem"},action:{color:e.palette.primary.main,textDecoration:"none","&:hover":{cursor:"pointer"}},infeasible:{color:e.palette.error.main},pendingResources:{color:e.palette.secondary.main},webuiDisplay:{fontSize:"0.875rem"},inlineHTML:{fontSize:"0.875rem",display:"inline"}})})),Re=function(e){var t=e.actor,n=Object(i.useState)({}),o=Object(r.a)(n,2),c=o[0],s=o[1],u=Fe(),m=function(e){return Object(f.a)(p.a.mark((function n(){var r,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.state!==a.Alive){n.next=8;break}return n.next=3,w(t.nodeId,t.pid,e);case 3:return r=n.sent,s(Object(fe.a)(Object(fe.a)({},c),{},Object(pe.a)({},r,{startTime:Date.now(),latestResponse:null}))),o=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/api/check_profiling_status",{profiling_id:r});case 2:t=e.sent,s(Object(fe.a)(Object(fe.a)({},c),{},Object(pe.a)({},r,Object(fe.a)(Object(fe.a)({},c[r]),{},{latestResponse:t})))),"pending"===t.status&&setTimeout(o,1e3);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.next=8,o();case 8:case"end":return n.stop()}}),n)})))},d=[];return S(t)&&t.webuiDisplay&&(d=Object.keys(t.webuiDisplay).sort().map((function(e,n,a){var r=t.webuiDisplay[e],o=JSON.parse(r),c=o.message;return"html"===o.dtype&&(c=l.a.createElement("div",{className:u.inlineHTML,dangerouslySetInnerHTML:{__html:c}})),""===e?l.a.createElement(v.a,{className:u.webuiDisplay},"\xa0 \xa0 ",c):l.a.createElement(v.a,{className:u.webuiDisplay},"\xa0 \xa0 ",e,": ",c)}))),l.a.createElement("div",{className:u.root},l.a.createElement(v.a,{className:u.title},S(t)?l.a.createElement(l.a.Fragment,null,"Actor ",t.actorId," (Profile for",[10,30,60].map((function(e){return l.a.createElement(l.a.Fragment,{key:e}," ",l.a.createElement("span",{className:u.action,onClick:m(e)},e,"s"))})),")"," ",t.state===a.Alive&&l.a.createElement("span",{className:u.action,onClick:function(){var e,n,r;t.state===a.Alive&&(e=t.actorId,n=t.ipAddress,r=t.port,k("/logical/kill_actor",{actorId:e,ipAddress:n,port:r}))}},"Kill Actor"),Object.entries(c).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1],o=a.startTime,c=a.latestResponse;return null!==c&&l.a.createElement(l.a.Fragment,{key:n},"(","pending"===c.status?"Profiling for ".concat(Math.round((Date.now()-o)/1e3),"s..."):"finished"===c.status?l.a.createElement("a",{className:u.action,href:T(n),rel:"noopener noreferrer",target:"_blank"},"Profiling result"):"error"===c.status?"Profiling error: ".concat(c.error.trim()):void 0,")"," ")}))):t.state===a.Infeasible?l.a.createElement("span",{className:u.infeasible},t.actorClass," cannot be created because the Ray cluster cannot satisfy its resource requirements."):l.a.createElement("span",{className:u.pendingResources},t.actorClass," is pending until resources are available.")),l.a.createElement(Ie,{actor:t}),S(t)&&l.a.createElement(l.a.Fragment,null,d.length>0&&l.a.createElement(l.a.Fragment,null,d)))},Ae=function(e){return"".concat(e,"s")},Le=Object(te.a)(B.a)({textAlign:"center"}),Me=Object(b.a)((function(e){return Object(g.a)({container:{margin:e.spacing(1),padding:e.spacing(1),marginLeft:e.spacing(2)},title:{margin:e.spacing(1)},actorEntry:{width:"100%"}})})),De=function(e){var t=e.actorGroup,n=e.title,o=Me(),c=Object(i.useState)(!1),s=Object(r.a)(c,2),u=s[0],m=s[1],d=function(){return m(!u)},p=t.entries.map((function(e,t){var n;return l.a.createElement(B.a,{component:"div",className:o.actorEntry,key:null!==(n=e.actorId)&&void 0!==n?n:t},l.a.createElement(Re,{actor:e}))})),f=a.Alive,b=a.PendingResources,g=a.Infeasible,h=t.summary;return l.a.createElement(ne.a,{className:o.container},l.a.createElement(B.a,{display:"block",className:o.title},l.a.createElement(v.a,{variant:"h5"},n)),l.a.createElement(ae.a,{container:!0,xs:12,spacing:2},l.a.createElement(ae.a,{container:!0,item:!0,xs:5,className:o.title},g in h.stateToCount&&l.a.createElement(de,{label:l.a.createElement(xe,{state:g,variant:"body1",showTooltip:!0}),datum:h.stateToCount[g]}),l.a.createElement(de,{label:l.a.createElement(xe,{state:f,variant:"body1",showTooltip:!0}),datum:f in h.stateToCount?h.stateToCount[f]:0}),l.a.createElement(de,{label:l.a.createElement(xe,{state:b,variant:"body1",showTooltip:!0}),datum:b in h.stateToCount?h.stateToCount[b]:0})),l.a.createElement(ae.a,{container:!0,item:!0,xs:5,className:o.title},l.a.createElement(de,{label:"Mean Lifetime",datum:Ae(h.avgLifetime)}),l.a.createElement(de,{label:"Max Lifetime",datum:Ae(h.maxLifetime)}),l.a.createElement(de,{label:"Executed Tasks",datum:h.numExecutedTasks}))),u?l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,null,p),l.a.createElement(Le,null,l.a.createElement(le,{onClick:d}))):l.a.createElement(Le,null,l.a.createElement(se,{onClick:d})))},ze=function(e){var t=e.actorGroups,n=function(e){var t;return null!==(t=e.summary.stateToCount[a.Infeasible])&&void 0!==t?t:0},o=ee(Object.values(t).map(n)),c=Object(i.useState)(o>0),s=Object(r.a)(c,2),u=s[0],m=s[1],d=Q(Object.entries(t),(function(e,t){var a=Object(r.a)(e,2),o=a[0],c=a[1],i=Object(r.a)(t,2),l=i[0],s=i[1],u=n(c),m=n(s);return u!==m?u>m?-1:1:o>l?1:-1})).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return l.a.createElement(De,{actorGroup:a,title:n,key:"acg-".concat(n)})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{open:u},l.a.createElement(j.a,{severity:"warning",onClose:function(){return m(!1)}},"There are one or more actors that cannot currently be created due to insufficient cluster resources. These have been sorted to the top of the list. If you are using autoscaling functionality, you may ignore this message.")),d)},Pe=Object(b.a)((function(e){return Object(g.a)({container:{marginBottom:e.spacing(1)}})})),We=function(e){return e.dashboard.actorGroups},Ue=function(){var e=Object(i.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(J.a)(n,500),c=Object(r.a)(o,1)[0],u=Pe(),m=Object(s.d)(We);if(!m)return l.a.createElement(v.a,{color:"textSecondary"},"Loading...");if(0===Object.keys(m).length)return l.a.createElement(v.a,{color:"textSecondary"},"Finished loading, but have found no actors yet.");var d=""===c?Object.entries(m):Object.entries(m).filter((function(e){var t=Object(r.a)(e,2),n=t[0];t[1];return function(e,t){var n=t.toLowerCase();return-1!==e.toLowerCase().search(n)}(n,c)}));return l.a.createElement(B.a,{className:u.container},0===d.length?l.a.createElement(v.a,{color:"textSecondary"},"No actors found."):l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,null,l.a.createElement(_.a,{htmlFor:"actor-name-filter"},"Actor Search"),l.a.createElement(H.a,{id:"actor-name-filter","aria-describedby":"actor-name-helper-text",value:n,onChange:function(e){return a(e.target.value)}}),l.a.createElement(V.a,{id:"actor-name-helper-text"},"Search for an actor by name")),l.a.createElement(ze,{actorGroups:Object.fromEntries(d)})))},Be=n(474),Ge=n(431),_e=n(476),He=n(140),Ve=n.n(He),Je=n(139),qe=n.n(Je),Ye=n(138),Ke=n.n(Ye),Xe=n(90),Qe=Object(Xe.b)({name:"dashboard",initialState:{actorGroups:null,tab:0,rayConfig:null,nodeInfo:null,tuneInfo:null,tuneAvailability:null,lastUpdatedAt:null,error:null,memoryTable:null,shouldObtainMemoryTable:!1},reducers:{setTab:function(e,t){e.tab=t.payload},setRayConfig:function(e,t){e.rayConfig=t.payload},setNodeInfo:function(e,t){e.nodeInfo=t.payload.nodeInfo,e.lastUpdatedAt=Date.now()},setActorGroups:function(e,t){e.actorGroups=t.payload.actorGroups},setTuneInfo:function(e,t){e.tuneInfo=t.payload.result,e.lastUpdatedAt=Date.now()},setTuneAvailability:function(e,t){e.tuneAvailability=t.payload.result,e.lastUpdatedAt=Date.now()},setError:function(e,t){e.error=t.payload},setMemoryTable:function(e,t){e.memoryTable=t.payload.memoryTable},setShouldObtainMemoryTable:function(e,t){e.shouldObtainMemoryTable=t.payload}}}),Ze=Qe.actions,$e=Qe.reducer,et=function(e,t){return"".concat((e/("mebibyte"===t?Math.pow(1024,2):Math.pow(1024,3))).toFixed(1)," ").concat("mebibyte"===t?"MiB":"GiB")},tt=function(e,t,n,a){var r=et(e,n),o=et(t,n),c=100*e/t,i="".concat(r," / ").concat(o);return a?"".concat(i," (").concat(c.toFixed(0),"%)"):i},nt=function(e){var t=Math.floor(e)%60,n=Math.floor(e/60)%60,a=Math.floor(e/60/60)%24,r=Math.floor(e/60/60/24),o=function(e){return e.toString().padStart(2,"0")};return[r?"".concat(r,"d"):"","".concat(o(a),"h"),"".concat(o(n),"m"),"".concat(o(t),"s")].join(" ")},at=function(e){try{return(e.toString().split(".")[1].length||0)<=3?e.toString():Math.abs(e.valueOf())>=1?e.toPrecision(5):e.toExponential()}catch(t){return e.toString()}},rt=Object(b.a)((function(e){return Object(g.a)({expandCollapseIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"},container:{padding:e.spacing(1),margin:e.spacing(1)}})})),ot=function(e){var t=e.memoryTableSummary,n=rt(),a=[["Total Local Reference Count","".concat(t.totalLocalRefCount)],["Pinned in Memory Count","".concat(t.totalPinnedInMemory)],["Total Used by Pending Tasks Count","".concat(t.totalUsedByPendingTask)],["Total Captured in Objects Count","".concat(t.totalCapturedInObjects)],["Total Memory Used by Objects","".concat(et(t.totalObjectSize,"mebibyte"))],["Total Actor Handle Count","".concat(t.totalActorHandles)]];return l.a.createElement(ae.a,{container:!0,className:n.container},a.map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return l.a.createElement(de,{key:n,label:n,datum:a})})))},ct=n(472),it=n(473),lt=n(470),st=n(471),ut=n(500),mt=n(469),dt=Object(te.a)(mt.a)((function(e){return{padding:e.theme.spacing(1),textAlign:"center"}})),pt=(Object(te.a)(mt.a)((function(e){return{padding:e.theme.spacing(1),textAlign:"center",cursor:"pointer"}})),Object(b.a)((function(e){return Object(g.a)({visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}})}))),ft=function(e){var t=e.order,n=e.orderBy,a=e.onRequestSort,r=e.headerInfo,o=e.firstColumnEmpty,c=pt();return l.a.createElement(lt.a,null,l.a.createElement(st.a,null,o&&l.a.createElement(dt,null),r.map((function(e){return e.sortable?l.a.createElement(dt,{key:e.label,align:e.numeric?"right":"left",sortDirection:n===e.id&&t},l.a.createElement(ut.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(r=e.id,function(e){a(e,r)})},e.label,n===e.id?l.a.createElement("span",{className:c.visuallyHidden},"desc"===t?"sorted descending":"sorted ascending"):null)):l.a.createElement(dt,{key:e.label,align:e.numeric?"right":"left"},e.label);var r}))))},bt=function(e){var t=e.memoryTableEntry,n=-1===t.objectSize?"?":et(t.objectSize,"mebibyte"),a=[t.nodeIpAddress,t.pid,t.type,t.objectRef,n,t.referenceType,t.callSite];return l.a.createElement(st.a,{hover:!0},a.map((function(e,t){return l.a.createElement(dt,{key:"".concat(t)},e)})))},gt=Object(b.a)((function(e){return Object(g.a)({container:{margin:e.spacing(1),padding:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center"}})})),vt=[{id:"nodeIpAddress",label:"IP Address",numeric:!1,sortable:!0},{id:"pid",label:"PID",numeric:!1,sortable:!0},{id:"type",label:"Type",numeric:!1,sortable:!0},{id:"objectRef",label:"Object Ref",numeric:!1,sortable:!0},{id:"objectSize",label:"Object Size",numeric:!1,sortable:!0},{id:"referenceType",label:"Reference Type",numeric:!1,sortable:!0},{id:"callSite",label:"Call Site",numeric:!1,sortable:!0}],ht=function(e){var t=e.tableEntries,n=gt(),a=l.a.useState("asc"),o=Object(r.a)(a,2),c=o[0],i=o[1],s=l.a.useState(null),u=Object(r.a)(s,2),m=u[0],d=u[1],p=m&&function(e,t){return"desc"===e?function(e,n){return Y(e,n,t)}:function(e,n){return-Y(e,n,t)}}(c,m),f=(p?Q(t,p):t).map((function(e){return l.a.createElement(bt,{memoryTableEntry:e,key:e.objectRef})}));return l.a.createElement(ne.a,{className:n.container,elevation:2},l.a.createElement(ct.a,null,l.a.createElement(ft,{orderBy:m,order:c,onRequestSort:function(e,t){t===m?i("asc"===c?"desc":"asc"):(d(t),i("asc"))},headerInfo:vt,firstColumnEmpty:!1}),l.a.createElement(it.a,null,f)))},Et=Object(te.a)(B.a)({textAlign:"center"}),yt=Object(b.a)((function(e){return Object(g.a)({container:{marginTop:e.spacing(2),marginBottom:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})})),jt=function(e){var t=e.groupKey,n=e.groupTitle,a=e.entries,o=e.summary,c=e.initialExpanded,s=e.initialVisibleEntries,u=yt(),m=Object(i.useState)(c),d=Object(r.a)(m,2),p=d[0],f=d[1],b=Object(i.useState)(s),g=Object(r.a)(b,2),v=g[0],h=g[1],E=function(){return f(!p)},y=a.slice(0,v);return l.a.createElement(ne.a,{key:t,className:u.container},n,l.a.createElement(ot,{initialExpanded:!1,memoryTableSummary:o}),p?l.a.createElement(l.a.Fragment,null,l.a.createElement(ht,{tableEntries:y}),l.a.createElement(Et,null,a.length>v&&l.a.createElement(se,{onClick:function(){return h(v+10)}}),l.a.createElement(le,{onClick:E}))):l.a.createElement(Et,null,l.a.createElement(se,{onClick:E})))},Ot=function(e,t){return"node"===t?l.a.createElement(v.a,{variant:"h6"},"Node ".concat(e)):"stack_trace"===t?l.a.createElement(kt,{stackTrace:e}):""===t?l.a.createElement(v.a,{variant:"h6"},"All entries"):l.a.createElement(v.a,{variant:"h6"},"Unknown Group")},kt=function(e){var t=e.stackTrace.split(" | ").map((function(e,t){return l.a.createElement(v.a,{variant:0===t?"h6":"subtitle2",style:{marginLeft:"".concat(t,"em")},key:t},0!==t&&l.a.createElement(Ke.a,null),e)}));return l.a.createElement(B.a,null,t)},St=Object(b.a)((function(e){return Object(g.a)({pauseButton:{margin:e.spacing(1),padding:e.spacing(1),float:"right"},select:{minWidth:"7em"}})})),Nt=function(e){return e.dashboard.memoryTable},Ct=function(e){return 0===Object.keys(e.group).length},xt=function(e){return Math.abs(((new Date).getTime()-e.getTime())/1e3)>10},wt=function(){var e=Object(s.d)(Nt),t=Object(s.c)(),n=new Date,a=Object(i.useState)(!1),o=Object(r.a)(a,2),c=o[0],u=o[1],m=c?l.a.createElement(qe.a,null):l.a.createElement(Ve.a,null),d=St(),p=Object(i.useState)("node"),f=Object(r.a)(p,2),b=f[0],g=f[1];Object(i.useEffect)((function(){return A(!0),function(){A(!1)}}),[]);var E=Object(i.useCallback)((function(){}),[b,t]),y=Object(i.useRef)(null);if(Object(i.useEffect)((function(){y.current||c||(E(),y.current=setInterval(E,4e3));return function(){y.current&&(clearInterval(y.current),y.current=null)}}),[c,E,t]),!e||Ct(e)&&!xt(n))return l.a.createElement(v.a,{align:"center",color:"textSecondary",variant:"h3"},l.a.createElement(Be.a,null)," Loading");if(Ct(e)&&xt(n))return l.a.createElement(v.a,{align:"center",color:"textSecondary",variant:"h3"},"Finished loading, but nothing found.");var j=Object.entries(e.group).sort((function(e,t){return Object(r.a)(e,1)[0]<Object(r.a)(t,1)[0]?-1:1})).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return l.a.createElement(jt,{key:n,groupKey:n,groupTitle:Ot(n,b),entries:a.entries,summary:a.summary,initialExpanded:!1,initialVisibleEntries:10})}));return l.a.createElement(B.a,null,l.a.createElement(G.a,null,l.a.createElement(_.a,{shrink:!0,id:"group-by-label"},"Group by"),l.a.createElement(Ge.a,{labelId:"group-by-label",value:b,className:d.select,onChange:function(e){return g(e.target.value)},color:"primary",displayEmpty:!0},l.a.createElement(_e.a,{value:""},l.a.createElement("em",null,"None")),l.a.createElement(_e.a,{value:"node"},"Node IP Address"),l.a.createElement(_e.a,{value:"stack_trace"},"Stack Trace"))),l.a.createElement(h.a,{color:"primary",className:d.pauseButton,onClick:function(){y.current&&(clearInterval(y.current),y.current=null),A(!c),u(!c)}},m,c?"Resume Collection":"Pause Collection"),j)},Tt=n(479),It=n(496),Ft=n(8),Rt=n(478),At=n(421),Lt=n(141),Mt=n.n(Lt),Dt=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.handleClose,a=e.title;return l.a.createElement(Rt.a,{classes:{paper:t.paper},fullWidth:!0,maxWidth:"md",onClose:n,open:!0,scroll:"body"},l.a.createElement(At.a,{className:t.closeButton,onClick:n},l.a.createElement(Mt.a,null)),l.a.createElement(v.a,{className:t.title},a),this.props.children)}}]),n}(l.a.Component),zt=Object(P.a)((function(e){return Object(g.a)({paper:{padding:e.spacing(3)},closeButton:{position:"absolute",right:e.spacing(1.5),top:e.spacing(1.5),zIndex:1},title:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1,fontSize:"1.5rem",lineHeight:1,marginBottom:e.spacing(3),paddingBottom:e.spacing(3)}})}))(Dt),Pt=n(54),Wt=n.n(Pt),Ut=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.lines;return l.a.createElement(ct.a,null,l.a.createElement(it.a,null,n.map((function(e,n){return l.a.createElement(st.a,{key:n},l.a.createElement(mt.a,{className:Wt()(t.cell,t.lineNumber),"data-line-number":n+1}),l.a.createElement(mt.a,{className:Wt()(t.cell,t.line)},e))}))))}}]),n}(l.a.Component),Bt=Object(P.a)((function(e){return Object(g.a)({root:{overflowX:"auto"},cell:{borderWidth:0,fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",padding:0,"&:last-child":{paddingRight:0}},lineNumber:{color:e.palette.text.secondary,paddingRight:e.spacing(2),textAlign:"right",verticalAlign:"top",width:"1%","&::before":{content:"attr(data-line-number)"}},line:{textAlign:"left",whiteSpace:"pre-wrap"}})}))(Ut),Gt=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={result:null,error:null},e}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,n=t.nodeIp,a=t.pid,e.next=4,C(n,a);case 4:r=e.sent,this.setState({result:r.errors,error:null}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({result:null,error:e.t0.toString()});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.clearErrorDialog,a=e.nodeIp,o=this.state,c=o.result,i=o.error;return l.a.createElement(zt,{handleClose:n,title:"Errors"},null!==i?l.a.createElement(v.a,{color:"error"},i):null===c?l.a.createElement(v.a,{color:"textSecondary"},"Loading..."):Object.entries(c).map((function(e){var n=Object(r.a)(e,2),o=n[0],c=n[1];return l.a.createElement(l.a.Fragment,{key:o},l.a.createElement(v.a,{className:t.header},a," (PID: ",o,")"),c.length>0?c.map((function(e,n){var a=e.message,r=e.timestamp;return l.a.createElement("div",{className:t.error,key:n},l.a.createElement(v.a,{className:t.timestamp},"Error at ",new Date(1e3*r).toLocaleString()),l.a.createElement(Bt,{lines:a.trim().split("\n")}))})):l.a.createElement(v.a,{color:"textSecondary"},"No errors found."))})))}}]),n}(l.a.Component),_t=Object(P.a)((function(e){return Object(g.a)({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},error:{backgroundColor:Object(Ft.c)(e.palette.error.main,.04),borderLeftColor:e.palette.error.main,borderLeftStyle:"solid",borderLeftWidth:2,marginTop:e.spacing(3),padding:e.spacing(2)},timestamp:{color:e.palette.text.secondary,marginBottom:e.spacing(1)}})}))(Gt),Ht=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={result:null,error:null},e}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,n=t.nodeIp,a=t.pid,e.next=4,x(n,a);case 4:r=e.sent,this.setState({result:r.logs,error:null}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({result:null,error:e.t0.toString()});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.clearLogDialog,a=e.nodeIp,o=this.state,c=o.result,i=o.error;return l.a.createElement(zt,{handleClose:n,title:"Logs"},null!==i?l.a.createElement(v.a,{color:"error"},i):null===c?l.a.createElement(v.a,{color:"textSecondary"},"Loading..."):Object.entries(c).map((function(e){var n=Object(r.a)(e,2),o=n[0],c=n[1];return l.a.createElement(l.a.Fragment,{key:o},l.a.createElement(v.a,{className:t.header},a," (PID: ",o,")"),c.length>0?l.a.createElement("div",{className:t.log},l.a.createElement(Bt,{lines:c})):l.a.createElement(v.a,{color:"textSecondary"},"No logs found."))})))}}]),n}(l.a.Component),Vt=Object(P.a)((function(e){return Object(g.a)({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},log:{backgroundColor:Object(Ft.c)(e.palette.primary.main,.04),borderLeftColor:e.palette.primary.main,borderLeftStyle:"solid",borderLeftWidth:2,padding:e.spacing(2)}})}))(Ht),Jt={id:"cpu",ClusterFeatureRenderFn:function(e){var t=e.nodes,n=$(t.map((function(e){return{weight:e.cpus[0],value:e.cpu}})));return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(ve,{percent:n,text:"".concat(n.toFixed(1),"%")}))},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(ve,{percent:t.cpu,text:"".concat(t.cpu.toFixed(1),"%")}))},WorkerFeatureRenderFn:function(e){var t=e.worker;return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(ve,{percent:t.cpuPercent,text:"".concat(t.cpuPercent.toFixed(1),"%")}))},nodeAccessor:function(e){return e.node.cpu},workerAccessor:function(e){return e.worker.cpuPercent}},qt=Jt,Yt={id:"disk",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=0,o=Object(Z.a)(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;"/"in c.disk&&(a+=c.disk["/"].used,r+=c.disk["/"].total)}}catch(i){o.e(i)}finally{o.f()}return l.a.createElement(ve,{percent:100*a/r,text:tt(a,r,"gibibyte",!0)})},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(ve,{percent:100*t.disk["/"].used/t.disk["/"].total,text:tt(t.disk["/"].used,t.disk["/"].total,"gibibyte",!0)})},WorkerFeatureRenderFn:function(){return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},nodeAccessor:function(e){return e.node.disk["/"].used}},Kt=Yt,Xt=n(109),Qt=["classes"],Zt=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=Object(Xt.a)(e,Qt);return l.a.createElement("span",Object.assign({className:t.button},n))}}]),n}(l.a.Component),$t=Object(P.a)((function(e){return Object(g.a)({button:{color:e.palette.primary.main,"&:hover":{cursor:"pointer",textDecoration:"underline"}}})}))(Zt),en=function(e){var t=e.nodes,n=ee(t.map((function(e){var t;return null!==(t=e.errorCount)&&void 0!==t?t:0})));return 0===n?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):l.a.createElement(l.a.Fragment,null,n.toLocaleString()," ",1===n?"error":"errors")},tn=function(e){return function(t){var n,a=t.node,r=null!==(n=a.errorCount)&&void 0!==n?n:0;return 0===r?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):l.a.createElement($t,{onClick:function(){return e(a.ip,null)}},"View all errors (",r.toLocaleString(),")")}},nn=function(e){var t;return null!==(t=e.node.errorCount)&&void 0!==t?t:0},an=function(e){return function(t){var n,a=t.node,r=t.worker;return 0!==r.errorCount?l.a.createElement($t,{onClick:function(){return e(a.ip,r.pid)}},"View errors (",null===(n=r.errorCount)||void 0===n?void 0:n.toLocaleString(),")"):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors")}},rn=function(e){var t;return null!==(t=e.worker.errorCount)&&void 0!==t?t:0},on=function(e){return{id:"errors",ClusterFeatureRenderFn:en,WorkerFeatureRenderFn:an(e),NodeFeatureRenderFn:tn(e),nodeAccessor:nn,workerAccessor:rn}},cn=Object(te.a)(v.a)((function(e){return{paddingRight:e.theme.spacing(1)}})),ln=function(e){if(null===e.gpus)return NaN;var t=e.gpus.filter((function(e){return e.utilizationGpu}));return 0===t.length?NaN:ee(t.map((function(e){var t;return null!==(t=e.utilizationGpu)&&void 0!==t?t:0})))/t.length},sn=function(e){var t=e.gpu,n=e.slot;return l.a.createElement(B.a,{display:"flex",style:{minWidth:120}},l.a.createElement(ue.a,{title:t.name},l.a.createElement(cn,{variant:"body1"},"[",n,"]:")),t.utilizationGpu?l.a.createElement(ve,{percent:t.utilizationGpu,text:"".concat(t.utilizationGpu.toFixed(1),"%")}):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"))},un=function(e){var t=e.resourceSlot,n=t.allocation,a=t.slot,r=n>=1&&void 0===a?"0":void 0===a?"?":a.toString();return l.a.createElement(v.a,{variant:"body1"},"[",r,"]: ",n)},mn={id:"gpu",ClusterFeatureRenderFn:function(e){var t=function(e){var t=e.map((function(e){return{weight:e.gpus.length,value:ln(e)}})).filter((function(e){return!isNaN(e.value)}));return 0===t.length?NaN:$(t)}(e.nodes);return l.a.createElement("div",{style:{minWidth:120}},isNaN(t)?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):l.a.createElement(ve,{percent:t,text:"".concat(t.toFixed(1),"%")}))},NodeFeatureRenderFn:function(e){var t=e.node,n=void 0!==t.gpus&&0!==t.gpus.length;return l.a.createElement("div",{style:{minWidth:120}},n?t.gpus.map((function(e,t){return l.a.createElement(sn,{gpu:e,slot:t})})):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"))},WorkerFeatureRenderFn:function(e){var t,n,a=null===(t=e.worker.coreWorkerStats[0])||void 0===t?void 0:t.usedResources,r=null===a||void 0===a?void 0:a.GPU;return n=void 0===r?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):r.resourceSlots.sort((function(e,t){return void 0===e.slot&&void 0===t.slot?0:void 0===e.slot?1:void 0===t.slot?-1:e.slot-t.slot})).map((function(e){return l.a.createElement(un,{resourceSlot:e})})),l.a.createElement("div",{style:{minWidth:60}},n)},nodeAccessor:function(e){var t=e.node;return ln(t)},workerAccessor:function(e){var t;return null!==(t=function(e){var t,n=null===e||void 0===e||null===(t=e.coreWorkerStats[0])||void 0===t?void 0:t.usedResources,a=null===n||void 0===n?void 0:n.GPU;return a&&ee(a.resourceSlots.map((function(e){return e.allocation})))}(e.worker))&&void 0!==t?t:0}},dn=function(e){var t=function(e){return e.memoryUsed&&e.memoryTotal?e.memoryUsed/e.memoryTotal:NaN};return 0===e.gpus.map(t).filter((function(e){return!!e})).length?NaN:100*(ee(e.gpus.map((function(e){return t(e)})))/e.gpus.length)},pn=function(e){var t=e.gpuName,n=e.slot,a=function(e,t){return"".concat(e," MiB / ").concat(t," MiB")}(e.utilization,e.total);return l.a.createElement(B.a,{display:"flex",style:{minWidth:120}},l.a.createElement(ue.a,{title:t},l.a.createElement(cn,{variant:"body1"},"[",n,"]: ",a)))},fn={id:"gram",ClusterFeatureRenderFn:function(e){var t=function(e){var t=e.map((function(e){return{weight:e.gpus.length,value:dn(e)}})).filter((function(e){return!isNaN(e.value)}));return 0===t.length?NaN:$(t)}(e.nodes);return l.a.createElement("div",{style:{minWidth:60}},isNaN(t)?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):l.a.createElement(ve,{percent:t,text:"".concat(t.toFixed(1),"%")}))},NodeFeatureRenderFn:function(e){var t=e.node.gpus.map((function(e,t){var n={gpuName:e.name,utilization:e.memoryUsed,total:e.memoryTotal,slot:t};return l.a.createElement(pn,n)}));return l.a.createElement("div",{style:{minWidth:60}},0===t.length?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):l.a.createElement("div",{style:{minWidth:120}},t))},WorkerFeatureRenderFn:function(e){var t=e.worker,n=e.node.gpus.map((function(e,n){var a=e.processes.find((function(e){return e.pid===t.pid}));if(a){var r={gpuName:e.name,total:e.memoryTotal,utilization:a.gpuMemoryUsage,slot:n};return l.a.createElement(pn,r)}})).filter((function(e){return void 0!==e}));return 0===n.length?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):l.a.createElement("div",{style:{minWidth:120}},n)},nodeAccessor:function(e){var t=e.node,n=dn(t);return isNaN(n)?-1:n},workerAccessor:function(e){var t=e.worker,n=e.node;return 0===n.gpus.length?-1:function(e,t){var n=t.gpus.map((function(e){return e.processes})).map((function(t){return t.find((function(t){return t.pid===e.pid}))})).map((function(e){return(null===e||void 0===e?void 0:e.gpuMemoryUsage)||0}));return ee(n)}(t,n)}},bn={id:"host",ClusterFeatureRenderFn:function(e){var t=e.nodes;return l.a.createElement(l.a.Fragment,null,"Totals (",t.length.toLocaleString()," ",1===t.length?"host":"hosts",")")},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(l.a.Fragment,null,t.hostname," (",t.ip,")")},WorkerFeatureRenderFn:function(e){var t=e.worker;return l.a.createElement(l.a.Fragment,null,t.cmdline[0].split("::",2)[0]," (PID: ",t.pid,")")},nodeAccessor:function(e){return e.node.hostname}},gn=function(e){var t=e.nodes,n=ee(t.map((function(e){var t;return null!==(t=e.logCount)&&void 0!==t?t:0})));return 0===n?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):l.a.createElement(l.a.Fragment,null,n.toLocaleString()," ",1===n?"line":"lines")},vn=function(e){return function(t){var n,a=t.node,r=null!==(n=a.logCount)&&void 0!==n?n:0;return 0===r?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):l.a.createElement($t,{onClick:function(){return e(a.ip,null)}},"View all logs (",r.toLocaleString()," ",1===a.logCount?"line":"lines",")")}},hn=function(e){var t=e.node;return t.logCount?ee(Object.values(t.logCount)):0},En=function(e){return function(t){var n,a=t.worker,r=t.node,o=null!==(n=a.logCount)&&void 0!==n?n:0;return 0!==o?l.a.createElement($t,{onClick:function(){return e(r.ip,a.pid)}},"View log (",o.toLocaleString()," ",1===a.logCount?"line":"lines",")"):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs")}},yn=function(e){var t;return null!==(t=e.worker.logCount)&&void 0!==t?t:0},jn=function(e){return{id:"logs",ClusterFeatureRenderFn:gn,WorkerFeatureRenderFn:En(e),NodeFeatureRenderFn:vn(e),workerAccessor:yn,nodeAccessor:hn}},On={id:"objectStoreMemory",ClusterFeatureRenderFn:function(e){var t=e.nodes,n=ee(t.map((function(e){return e.raylet.objectStoreAvailableMemory}))),a=ee(t.map((function(e){return e.raylet.objectStoreUsedMemory}))),r=a+n;return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(ve,{percent:a/r*100,text:tt(a,r,"mebibyte",!1)}))},NodeFeatureRenderFn:function(e){var t=e.node,n=t.raylet.objectStoreAvailableMemory,a=t.raylet.objectStoreUsedMemory,r=n+a;if(void 0===a||void 0===n||0===r)return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A");var o=a/r;return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(ve,{percent:100*o,text:tt(a,r,"mebibyte",!1)}))},WorkerFeatureRenderFn:function(){return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},nodeAccessor:function(e){return e.node.raylet.objectStoreUsedMemory},workerAccessor:function(){return 0}},kn={id:"ram",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=0,o=Object(Z.a)(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;a+=c.mem[0]-c.mem[1],r+=c.mem[0]}}catch(i){o.e(i)}finally{o.f()}return l.a.createElement(ve,{percent:100*a/r,text:tt(a,r,"gibibyte",!0)})},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(ve,{percent:100*(t.mem[0]-t.mem[1])/t.mem[0],text:tt(t.mem[0]-t.mem[1],t.mem[0],"gibibyte",!0)})},WorkerFeatureRenderFn:function(e){var t=e.node,n=e.worker;return l.a.createElement(ve,{percent:100*n.memoryInfo.rss/t.mem[0],text:et(n.memoryInfo.rss,"mebibyte")})},nodeAccessor:function(e){var t=e.node;return 100*(t.mem[0]-t.mem[1])},workerAccessor:function(e){return e.worker.memoryInfo.rss}},Sn={id:"received",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=Object(Z.a)(n);try{for(r.s();!(t=r.n()).done;){a+=t.value.networkSpeed[1]}}catch(o){r.e(o)}finally{r.f()}return l.a.createElement(l.a.Fragment,null,et(a,"mebibyte"),"/s")},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(l.a.Fragment,null,et(t.networkSpeed[1],"mebibyte"),"/s")},WorkerFeatureRenderFn:function(){return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},nodeAccessor:function(e){return e.node.networkSpeed[1]}},Nn={id:"sent",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=Object(Z.a)(n);try{for(r.s();!(t=r.n()).done;){a+=t.value.networkSpeed[0]}}catch(o){r.e(o)}finally{r.f()}return l.a.createElement(l.a.Fragment,null,et(a,"mebibyte"),"/s")},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(l.a.Fragment,null,et(t.networkSpeed[0],"mebibyte"),"/s")},WorkerFeatureRenderFn:function(){return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},nodeAccessor:function(e){return e.node.networkSpeed[0]}},Cn=function(e){return Date.now()/1e3-e},xn={id:"uptime",NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(l.a.Fragment,null,nt(Cn(t.bootTime)))},WorkerFeatureRenderFn:function(e){var t=e.worker;return l.a.createElement(l.a.Fragment,null,nt(Cn(t.createTime)))},nodeAccessor:function(e){var t=e.node;return Cn(t.bootTime)},workerAccessor:function(e){var t=e.worker;return Cn(t.createTime)}},wn={id:"workers",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=0,o=Object(Z.a)(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;a+=c.cpus[0],r+=c.workers.length}}catch(i){o.e(i)}finally{o.f()}return l.a.createElement(l.a.Fragment,null,r.toLocaleString()," ",1===r?"worker":"workers"," / ",a.toLocaleString()," ",1===a?"core":"cores")},NodeFeatureRenderFn:function(e){var t=e.node,n=t.cpus[0],a=t.workers.length;return l.a.createElement(l.a.Fragment,null,a.toLocaleString()," ",1===a?"worker":"workers"," / ",n.toLocaleString()," ",1===n?"core":"cores")},WorkerFeatureRenderFn:function(e){var t=e.worker;return l.a.createElement(l.a.Fragment,null,t.cmdline[0].split("::",2)[1])}},Tn=n(142),In=n.n(Tn),Fn=n(143),Rn=n.n(Fn),An=function(e){var t=e.features,n=e.data,a=n.node,r=n.worker;return l.a.createElement(st.a,{hover:!0},l.a.createElement(dt,null),t.map((function(e,t){return l.a.createElement(dt,{key:t},l.a.createElement(e,{node:a,worker:r}))})))},Ln=Object(b.a)((function(e){return Object(g.a)({cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},expandCollapseCell:{cursor:"pointer"},expandCollapseIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"},extraInfo:{fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",whiteSpace:"pre"}})})),Mn=function(e){var t=e.features,n=e.node,a=e.initialExpanded,o=e.rayletInfo,c=e.workerFeatureData,s=Object(i.useState)(a),u=Object(r.a)(s,2),m=u[0],d=u[1],p=Ln(),f=t.map((function(e,t){var a=e.NodeFeatureRenderFn;return l.a.createElement(dt,{className:p.cell,key:t},l.a.createElement(a,{node:n}))}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(st.a,{hover:!0},l.a.createElement(mt.a,{className:Wt()(p.cell,p.expandCollapseCell),onClick:function(){return d(!m)}},m?l.a.createElement(Rn.a,{className:p.expandCollapseIcon}):l.a.createElement(In.a,{className:p.expandCollapseIcon})),f),m&&l.a.createElement(l.a.Fragment,null,void 0!==o&&l.a.createElement(st.a,{hover:!0},l.a.createElement(mt.a,{className:p.cell}),l.a.createElement(mt.a,{className:Wt()(p.cell,p.extraInfo),colSpan:t.length},o)),c.map((function(e,n){return l.a.createElement(An,{key:n,features:t.map((function(e){return e.WorkerFeatureRenderFn})),data:e})}))))},Dn=n(144),zn=n.n(Dn),Pn=Object(b.a)((function(e){return Object(g.a)({cell:{borderTopColor:e.palette.divider,borderTopStyle:"solid",borderTopWidth:2,padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},totalIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"}})})),Wn=function(e){var t=e.nodes,n=e.features,a=Pn();return l.a.createElement(st.a,{hover:!0},l.a.createElement(mt.a,{className:a.cell},l.a.createElement(zn.a,{className:a.totalIcon})),n.map((function(e,n){return e?l.a.createElement(mt.a,{className:a.cell,key:n},l.a.createElement(e,{nodes:t})):l.a.createElement(dt,{key:n})})))},Un=function(e,t){var n=e.sort((function(e,t){var n=e.worker,a=t.worker;return"ray::IDLE"===a.cmdline[0]?-1:"ray::IDLE"===n.cmdline[0]?1:n.pid<a.pid?-1:1}));return t?Q(n,t):n},Bn=Object(b.a)((function(e){return Object(g.a)({table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}}})})),Gn=function(e){var t,n;return null===(t=e.dashboard)||void 0===t||null===(n=t.nodeInfo)||void 0===n?void 0:n.clients.filter((function(e){return"ALIVE"===e.raylet.state}))},_n=[{id:"host",label:"Host",numeric:!0,sortable:!0},{id:"workers",label:"PID",numeric:!0,sortable:!1},{id:"uptime",label:"Uptime (s)",numeric:!0,sortable:!0},{id:"cpu",label:"CPU",numeric:!1,sortable:!0},{id:"ram",label:"RAM",numeric:!0,sortable:!0},{id:"gpu",label:"GPU",numeric:!0,sortable:!0},{id:"gram",label:"GRAM",numeric:!0,sortable:!0},{id:"objectStoreMemory",label:"Plasma",numeric:!1,sortable:!0},{id:"disk",label:"Disk",numeric:!0,sortable:!0},{id:"sent",label:"Sent",numeric:!0,sortable:!0},{id:"received",label:"Received",numeric:!1,sortable:!0},{id:"logs",label:"Logs",numeric:!1,sortable:!0},{id:"errors",label:"Errors",numeric:!1,sortable:!0}],Hn=function(){var e,t,n=Object(i.useState)(null),a=Object(r.a)(n,2),o=a[0],c=a[1],u=Object(i.useState)(null),m=Object(r.a)(u,2),d=m[0],p=m[1],f=Object(i.useState)(!0),b=Object(r.a)(f,2),g=b[0],h=b[1],E=l.a.useState("asc"),y=Object(r.a)(E,2),j=y[0],O=y[1],k=l.a.useState(null),S=Object(r.a)(k,2),N=S[0],C=S[1],x=Bn(),w=Object(s.d)(Gn);if(!w)return l.a.createElement(v.a,{color:"textSecondary"},"Loading...");var T=ee(w.map((function(e){return e.workers.length}))),I=[bn,wn,xn,qt,kn,mn,fn,On,Kt,Nn,Sn,jn((function(e,t){return c({nodeIp:e,pid:t})})),on((function(e,t){return p({nodeIp:e,pid:t})}))],F=null===(e=I.find((function(e){return e.id===N})))||void 0===e?void 0:e.nodeAccessor,R=F&&X(j,F),A=null===(t=I.find((function(e){return e.id===N})))||void 0===t?void 0:t.workerAccessor,L=A&&X(j,A),M=0!==w.map((function(e){return e.gpus})).filter((function(e){return void 0!==e&&0!==e.length})).length,D=0!==w.filter((function(e){return e.disk["/"].total>10})).length,z=function(e){return(M||"gpu"!==e.id&&"gram"!==e.id)&&(D||"disk"!==e.id)},P=I.filter(z),W=_n.filter(z),U=g?function(e,t,n,a){return(n?Q(e,n):e).map((function(n){var r=n.workers.map((function(e){return{node:n,worker:e}})),o=Un(r,t);return l.a.createElement(Mn,{key:n.raylet.nodeId,node:n,workerFeatureData:o,features:a,initialExpanded:e.length<=1})}))}(w,L,R,P):function(e,t,n){var a=n.map((function(e){return e.WorkerFeatureRenderFn})),r=e.flatMap((function(e){return e.workers.map((function(t){return{node:e,worker:t}}))}));return Un(r,t).map((function(e,t){return l.a.createElement(An,{features:a,data:e,key:"worker-".concat(t)})}))}(w,L,P);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt.a,{control:l.a.createElement(It.a,{checked:g,onChange:function(){return h(!g)},color:"primary"}),label:"Group by host"}),l.a.createElement(ct.a,{className:x.table},l.a.createElement(ft,{onRequestSort:function(e,t){t===N?O("asc"===j?"desc":"asc"):(C(t),O("asc"))},headerInfo:W,order:j,orderBy:N,firstColumnEmpty:!0}),l.a.createElement(it.a,null,U,l.a.createElement(Wn,{clusterTotalWorkers:T,nodes:w,features:P.map((function(e){return e.ClusterFeatureRenderFn}))}))),null!==o&&l.a.createElement(Vt,{clearLogDialog:function(){return c(null)},nodeIp:o.nodeIp,pid:o.pid}),null!==d&&l.a.createElement(_t,{clearErrorDialog:function(){return p(null)},nodeIp:d.nodeIp,pid:d.pid}))},Vn=Object(b.a)((function(e){return Object(g.a)({table:{marginTop:e.spacing(1),width:"auto"},cell:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),textAlign:"center","&:last-child":{paddingRight:e.spacing(3)}},key:{color:e.palette.text.secondary}})})),Jn=Ze.setRayConfig,qn=Ze.setError,Yn=function(e){return e.dashboard.rayConfig},Kn=function(){var e=Vn(),t=Object(s.d)(Yn),n=Object(s.c)(),a=Object(i.useCallback)(Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("/api/ray_config",{});case 3:t=e.sent,n(Jn(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(qn(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n]),r=Object(i.useRef)(null);if(Object(i.useEffect)((function(){null===r.current&&(a(),r.current=setInterval(a,1e4));return function(){clearInterval(r.current)}}),[a]),null===t)return l.a.createElement(v.a,{color:"textSecondary"},"No Ray configuration detected.");var o=[{key:"Autoscaling mode",value:t.autoscalingMode},{key:"Head node type",value:t.headType},{key:"Worker node type",value:t.workerType},{key:"Min worker nodes",value:t.minWorkers},{key:"Initial worker nodes",value:t.initialWorkers},{key:"Max worker nodes",value:t.maxWorkers},{key:"Idle timeout",value:"".concat(t.idleTimeoutMinutes," ").concat(1===t.idleTimeoutMinutes?"minute":"minutes")}];return l.a.createElement("div",null,l.a.createElement(v.a,null,"Ray cluster configuration:"),l.a.createElement(ct.a,{className:e.table},l.a.createElement(lt.a,null,l.a.createElement(st.a,null,l.a.createElement(mt.a,{className:e.cell},"Setting"),l.a.createElement(mt.a,{className:e.cell},"Value"))),l.a.createElement(it.a,null,o.map((function(t,n){var a=t.key,r=t.value;return l.a.createElement(st.a,{key:n},l.a.createElement(mt.a,{className:Wt()(e.cell,e.key)},a),l.a.createElement(mt.a,{className:e.cell},r))})))))},Xn=n(482),Qn=n(480),Zn=Ze,$n=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={currentError:"",open:!1},e.handleOpen=function(t){e.setState({open:!0,currentError:t})},e.handleClose=function(){e.setState({open:!1})},e}return Object(M.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.tuneInfo,r=this.state,o=r.currentError,c=r.open;return null===a||0===Object.keys(a.errors).length?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(ct.a,{className:n.table},l.a.createElement(lt.a,null,l.a.createElement(st.a,null,l.a.createElement(mt.a,{className:n.cell}," Job ID"),l.a.createElement(mt.a,{className:n.cell}," Trial ID "),l.a.createElement(mt.a,{className:n.cell}," Trial Directory "),l.a.createElement(mt.a,{className:n.cell}," Error "))),l.a.createElement(it.a,null,null!==a.errors&&Object.keys(a.errors).map((function(t,r){return l.a.createElement(st.a,{key:r},l.a.createElement(mt.a,{className:n.cell},a.errors[t].jobId),l.a.createElement(mt.a,{className:n.cell},a.errors[t].trialId),l.a.createElement(mt.a,{className:n.cell},t),l.a.createElement(mt.a,{className:n.cell},l.a.createElement(Qn.a,{component:"button",variant:"body2",onClick:function(){e.handleOpen(t)}},"Show Error")))})))),c&&l.a.createElement(zt,{handleClose:this.handleClose,title:"Error Log"},c&&l.a.createElement(Bt,{lines:a.errors[o].text.trim().split("\n")})))}}]),n}(l.a.Component),ea=Object(s.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo}}),Zn)(Object(P.a)((function(e){return Object(g.a)({table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}}})}))($n)),ta=n(424),na=n(481),aa=Ze,ra=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).timeout=0,e.state={sortedColumn:void 0,ascending:!0,metricParamColumn:"",metricColumns:[],paramColumns:[],errorTrial:"",open:!1},e.onColumnClick=function(t,n){var a=e.state.ascending;a=t!==e.state.sortedColumn||!a,e.setState({sortedColumn:t,ascending:a}),n&&e.setState({metricParamColumn:n})},e.humanize=function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},e.handleOpen=function(t){"number"===typeof t&&(t=t.toString()),e.setState({open:!0,errorTrial:t})},e.handleClose=function(){e.setState({open:!1})},e.sortedCell=function(t,n,a){var r=e.props,o=r.tuneInfo,c=r.classes,i=e.state,s=i.sortedColumn,u=i.ascending,m=i.metricParamColumn,d="asc";if(t!==s||u||(d="desc"),null!==o){var p=function(){return e.onColumnClick(t)};n&&(p=function(){return e.onColumnClick(t,n)}),a||(a=0);var f=!1,b=t+a.toString();return n?(b=n+a.toString(),f=n===m&&s===t):f=t===s,l.a.createElement(mt.a,{className:c.cell,key:b,onClick:p},l.a.createElement(ut.a,{active:f,direction:d}),n?e.humanize(n):e.humanize(t))}},e.sortedTrialRecords=function(){var t=e.props.tuneInfo,n=e.state,a=n.sortedColumn,r=n.ascending,o=n.metricParamColumn;if(null===t||0===Object.keys(t.trialRecords).length)return null;var c=Object.values(t.trialRecords);if(!a)return c;var i=function(e){return e[a]};return"metrics"!==a&&"params"!==a||(i=function(e){return e[a][o]}),a&&(r?c.sort((function(e,t){return i(e)>i(t)?1:-1})):r||c.sort((function(e,t){return i(e)<i(t)?1:-1}))),c},e.handleMetricChoiceChange=function(t){return function(n){var a=e.state.metricColumns;n.target.checked?(a.push(t),e.setState({metricColumns:a})):(a=a.filter((function(e){return e!==t})),e.setState({metricColumns:a}))}},e.metricChoices=function(t){var n=e.state.metricColumns;return l.a.createElement(G.a,null,l.a.createElement(ta.a,{component:"legend"},"Select Metrics "),l.a.createElement(na.a,null,t.map((function(t){return l.a.createElement(Tt.a,{control:l.a.createElement(It.a,{checked:n.includes(t),onChange:e.handleMetricChoiceChange(t),value:t,color:"primary"}),label:t})}))))},e.handleParamChoiceChange=function(t){return function(n){var a=e.state.paramColumns;n.target.checked?(a.push(t),e.setState({paramColumns:a})):(a=a.filter((function(e){return e!==t})),e.setState({paramColumns:a}))}},e.paramChoices=function(t){var n=e.props.classes,a=e.state.paramColumns;return l.a.createElement(G.a,{className:n.paramChecklist},l.a.createElement(ta.a,{component:"legend"},"Select Parameters "),l.a.createElement(na.a,null,t.map((function(t){return l.a.createElement(Tt.a,{control:l.a.createElement(It.a,{checked:a.includes(t),onChange:e.handleParamChoiceChange(t),value:t,color:"primary"}),label:t})}))))},e}return Object(M.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.tuneInfo,r=this.state,o=r.metricColumns,c=r.paramColumns,i=r.open,s=r.errorTrial;if(null===a||0===Object.keys(a.trialRecords).length)return null;var u=Object.keys(a.trialRecords)[0],m=a.trialRecords[u].params,d=Object.keys(m).filter((function(e){return"args"!==e})),p=d,f=d.length>3;f&&(0===c.length&&this.setState({paramColumns:d.slice(0,3)}),p=c);var b=Object.keys(a.trialRecords[u].metrics),g=b,v=b.length>3;v&&(0===o.length&&this.setState({metricColumns:b.slice(0,3)}),g=o);var h=this.sortedTrialRecords();return l.a.createElement("div",{className:n.root},l.a.createElement(ae.a,{container:!0,spacing:0},(f||v)&&l.a.createElement(ae.a,{item:!0,xs:2,className:n.checkboxRoot},f&&this.paramChoices(d),v&&this.metricChoices(b)),l.a.createElement(ae.a,{item:!0,xs:f||v?10:12,className:n.table},l.a.createElement(ct.a,{stickyHeader:!0},l.a.createElement(lt.a,null,l.a.createElement(st.a,null,this.sortedCell("trialId"),this.sortedCell("jobId"),this.sortedCell("startTime"),p.map((function(t,n){return e.sortedCell("params",t,n)})),this.sortedCell("status"),g.map((function(t,n){return e.sortedCell("metrics",t,n)})),l.a.createElement(mt.a,{className:n.cell,key:"error"},"Error"))),l.a.createElement(it.a,null,null!==h&&h.map((function(t,a){return l.a.createElement(st.a,{key:a},l.a.createElement(mt.a,{className:n.cell},t.trialId),l.a.createElement(mt.a,{className:n.cell},t.jobId),l.a.createElement(mt.a,{className:n.cell},t.startTime),p.map((function(e,a){return l.a.createElement(mt.a,{className:n.cell,key:a},"number"===typeof t.params[e]?at(Number(t.params[e])):t.params[e])})),l.a.createElement(mt.a,{className:n.cell},t.status),t.metrics&&g.map((function(e,a){return l.a.createElement(mt.a,{className:n.cell,key:a},"number"===typeof t.metrics[e]?at(Number(t.metrics[e])):t.metrics[e])})),l.a.createElement(mt.a,{className:n.cell},"No Error"===t.error?"No Error":l.a.createElement(Qn.a,{component:"button",variant:"body2",onClick:function(){e.handleOpen(t.trialId)}},"Show Error")))})))))),i&&l.a.createElement(zt,{handleClose:this.handleClose,title:"Error Log"},i&&l.a.createElement(Bt,{lines:a.trialRecords[s].error.trim().split("\n")})))}}]),n}(l.a.Component),oa=Object(s.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo}}),aa)(Object(P.a)((function(e){return Object(g.a)({root:{padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(2)}},table:{marginTop:e.spacing(1),height:"700px",overflowY:"auto"},cell:{padding:e.spacing(1),textAlign:"right","&:last-child":{paddingRight:e.spacing(1)}},checkboxRoot:{height:"500px",overflowY:"auto",overflowX:"auto"},paramChecklist:{marginBottom:e.spacing(2)}})}))(ra)),ca=Ze,ia=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={tensorBoardEnabled:!1,loading:!1},e.handleSubmit=function(){e.setState({loading:!0}),R().then((function(){e.setState({loading:!1})}))},e.tensorBoard=function(){var t=e.props,n=t.classes,a=t.error,r=t.tuneInfo;return l.a.createElement("div",null,"TypeError: Failed to fetch"===a&&l.a.createElement(v.a,{className:n.warning,color:"textSecondary"},'Warning: Tensorboard server closed. View Tensorboard by running "tensorboard --logdir" if not displaying below.'),r&&!r.tensorboard.tensorboardCurrent&&l.a.createElement(v.a,{className:n.warning,color:"textSecondary"},"The below Tensorboard reflects a previously entered log directory. Restart the Ray Dashboard to change the Tensorboard logdir."),l.a.createElement("iframe",{src:"http://localhost:6006/",className:n.board,title:"TensorBoard"}))},e}return Object(M.a)(n,[{key:"enableTensorBoard",value:function(){R(),this.setState({tensorBoardEnabled:!0})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.tuneInfo,a=this.state.loading;if(null!==n){var r=n.tensorboard.tensorboardEnabled;return l.a.createElement("div",{className:t.root},!r&&l.a.createElement("div",null,l.a.createElement(h.a,{variant:"outlined",onClick:this.handleSubmit,className:t.warning},"Enable TensorBoard"),a&&l.a.createElement(Be.a,{className:t.progress,size:25})),r&&this.tensorBoard())}}}]),n}(l.a.Component),la=Object(s.b)((function(e){return{error:e.dashboard.error,tuneInfo:e.dashboard.tuneInfo}}),ca)(Object(P.a)((function(e){return Object(g.a)({root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(4)}},board:{width:"100%",height:"1000px",border:"none"},warning:{fontSize:"0.8125rem"},progress:{marginLeft:"10px",marginTop:"2px"}})}))(ia)),sa=Ze,ua=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).timeout=0,e.state={tabIndex:0,experiment:"",loading:!1},e.refreshTuneInfo=Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.props.tuneAvailability||!e.props.tuneAvailability.available){t.next=6;break}return t.next=4,I();case 4:n=t.sent,e.props.setTuneInfo(n);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.props.setError(t.t0.toString());case 11:return t.prev=11,e.timeout=window.setTimeout(e.refreshTuneInfo,1e3),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])}))),e.handleTabChange=function(t,n){e.setState({tabIndex:n})},e.handleExperimentChange=function(t){e.setState({experiment:t.target.value})},e.handleExperimentSubmit=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,F(e.state.experiment);case 4:return window.clearTimeout(e.timeout),t.next=7,e.refreshTuneInfo();case 7:e.setState({loading:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.props.setError(t.t0.toString()),e.setState({loading:!1});case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.experimentChoice=function(t){var n=e.props.classes,a=e.state.loading;return l.a.createElement("div",null,t&&l.a.createElement(v.a,{className:n.heading,color:"textPrimary"},"You can use this tab to monitor Tune jobs, their statuses, hyperparameters, and more. For more information, read the documentation"," ",l.a.createElement("a",{href:"https://docs.ray.io/en/master/ray-dashboard.html#tune"},"here"),"."),l.a.createElement("div",null,l.a.createElement(v.a,{className:n.prompt,color:"textSecondary"},"Enter Tune Log Directory Here:"),l.a.createElement(Xn.a,{className:n.input,id:"standard-basic",value:e.state.experiment,onChange:e.handleExperimentChange}),l.a.createElement(h.a,{className:n.submit,variant:"outlined",onClick:e.handleExperimentSubmit},"Submit"),a&&l.a.createElement(Be.a,{className:n.progress,size:25})))},e}return Object(M.a)(n,[{key:"componentWillUnmount",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearTimeout(this.timeout);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.tuneInfo,a=e.tuneAvailability;if(a&&!a.trialsAvailable)return this.experimentChoice(!0);var r=this.state.tabIndex,o=[{label:"Table",component:oa},{label:"TensorBoard",component:la}];null!==n&&Object.keys(n.errors).length>0&&o.push({label:"Errors",component:ea});var c=o[r].component;return l.a.createElement("div",{className:t.root},this.experimentChoice(!1),l.a.createElement(E.a,{className:t.tabs,indicatorColor:"primary",onChange:this.handleTabChange,textColor:"primary",value:r},o.map((function(e){var t=e.label;return l.a.createElement(y.a,{key:t,label:t})}))),l.a.createElement(c,null))}}]),n}(l.a.Component),ma=Object(s.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo,tuneAvailability:e.dashboard.tuneAvailability}}),sa)(Object(P.a)((function(e){return Object(g.a)({root:{backgroundColor:e.palette.background.paper},tabs:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1},heading:{fontsize:"0.9em",marginTop:e.spacing(2)},warning:{fontSize:"1em"},warningIcon:{fontSize:"1.25em",verticalAlign:"text-bottom"},formControl:{margin:e.spacing(1),minWidth:120},submit:{marginLeft:e.spacing(2),fontSize:"0.8125em"},prompt:{fontSize:"1em",marginTop:e.spacing(1)},input:{width:"85%"},progress:{marginLeft:e.spacing(2)}})}))(ua)),da=Ze.setNodeInfo,pa=Ze.setTuneAvailability,fa=Ze.setActorGroups,ba=Ze.setError,ga=Ze.setTab,va=Object(b.a)((function(e){return Object(g.a)({root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(4)},position:"relative"},tabs:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1}})})),ha=function(e){return e.dashboard.tab},Ea=function(e){return e.dashboard.tuneAvailability},ya=[{label:"Machine view",component:Hn},{label:"Logical view",component:Ue},{label:"Memory",component:wt},{label:"Ray config",component:Kn},{label:"Tune",component:ma}],ja=function(){var e=Object(s.c)(),t=Object(s.d)(Ea),n=Object(s.d)(ha),a=va(),o=Object(m.f)(),c=Object(i.useCallback)(Object(f.a)(p.a.mark((function t(){var n,a,o,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([k("/nodes",{view:"details"}),k("/tune/availability",{}),k("logical/actor_groups",{})]);case 3:n=t.sent,a=Object(r.a)(n,3),o=a[0],c=a[1],i=a[2],e(da({nodeInfo:o})),e(pa(c)),e(fa(i)),e(ba(null)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e(ba(t.t0.toString()));case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),[e]),u=Object(i.useRef)(null);Object(i.useEffect)((function(){null===u.current&&(c(),u.current=setInterval(c,1e3));return function(){clearInterval(u.current)}}),[c]);var d=ya.slice();null!==t&&t.available||d.splice(4);var b=d[n].component,g=Object(i.useState)(!1),O=Object(r.a)(g,2),S=O[0],N=O[1],C=Object(i.useState)(!1),x=Object(r.a)(C,2),w=x[0],T=x[1];return Object(i.useEffect)((function(){k("/usage_stats_enabled",{}).then((function(e){N(e.usageStatsPromptEnabled),T(e.usageStatsEnabled)}))}),[]),l.a.createElement("div",{className:a.root},l.a.createElement(v.a,{variant:"h5"},"Ray Dashboard"),l.a.createElement(h.a,{style:{position:"absolute",right:16,top:16},variant:"contained",size:"small",color:"primary",onClick:function(){return o.push("/node")}},"Try Experimental Dashboard"),l.a.createElement(E.a,{className:a.tabs,indicatorColor:"primary",onChange:function(t,n){return e(ga(n))},textColor:"primary",value:n},d.map((function(e){var t=e.label;return l.a.createElement(y.a,{key:t,label:t})}))),l.a.createElement(b,null),S?l.a.createElement(j.a,{style:{marginTop:30},severity:"info"},w?l.a.createElement("span",null,"Usage stats collection is enabled. To disable this, add `--disable-usage-stats` to the command that starts the cluster, or run the following command: `ray disable-usage-stats` before starting the cluster. See"," ",l.a.createElement("a",{href:"https://docs.ray.io/en/master/cluster/usage-stats.html",target:"_blank",rel:"noreferrer"},"https://docs.ray.io/en/master/cluster/usage-stats.html")," ","for more details."):l.a.createElement("span",null,"Usage stats collection is disabled.")):null,l.a.createElement(U,null))},Oa=n(81),ka=n(487),Sa=n(488),Na=n(501),Ca=n(489),xa=n(497),wa=n(494),Ta=n(57),Ia=n.n(Ta),Fa=n(65),Ra=n.n(Fa),Aa=function(e){if(e)return Ra.a.get("events?job_id=".concat(e))},La=n(107),Ma=n(113),Da=n(105),za=Object(b.a)((function(e){return{table:{marginTop:e.spacing(4),padding:e.spacing(2)},pageMeta:{padding:e.spacing(2),marginTop:e.spacing(2)},search:{margin:e.spacing(1),display:"inline-block",fontSize:12,lineHeight:"46px"},infokv:{margin:e.spacing(1)},li:{color:e.palette.text.secondary,fontSize:12},code:{wordBreak:"break-all",whiteSpace:"pre-line",margin:12,fontSize:14,color:e.palette.text.primary}}})),Pa=function(e){var t=za(),n=function(e){var t=e.job_id,n=Object(i.useContext)(ur).nodeMap,a=Object(i.useState)(!0),o=Object(r.a)(a,2),c=o[0],l=o[1],s=Object(La.a)(),u=s.changeFilter,m=s.filterFunc,d=Object(i.useState)([]),b=Object(r.a)(d,2),g=b[0],v=b[1],h=Object(i.useState)([]),E=Object(r.a)(h,2),y=E[0],j=E[1],O=Object(i.useState)({pageNo:1,pageSize:10,total:0}),k=Object(r.a)(O,2),S=k[0],N=k[1],C=g.filter(m).length,x=S.pageSize;Object(i.useEffect)((function(){var e=function(){var e=Object(f.a)(p.a.mark((function e(){var n,a,r,o,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,Aa(t);case 4:(null===(r=e.sent)||void 0===r||null===(n=r.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.events)&&v(r.data.data.events.sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)}))),e.next=12;break;case 8:return e.next=10,Ra.a.get("events");case 10:(null===(i=e.sent)||void 0===i||null===(o=i.data)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.events)&&(j(Object.keys(i.data.data.events).filter((function(e){return""!==e}))),v(Object.values(i.data.data.events).reduce((function(e,t){return e.concat(t)})).sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)}))));case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:return e.prev=16,l(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,14,16,19]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(i.useEffect)((function(){N((function(e){return Object(fe.a)(Object(fe.a)({},e),{},{total:Math.ceil(C/e.pageSize),pageNo:1})}))}),[C,x]);var w=[(S.pageNo-1)*S.pageSize,S.pageNo*S.pageSize];return{events:g.filter(m).slice(w[0],w[1]),changeFilter:function(){u.apply(void 0,arguments),N(Object(fe.a)(Object(fe.a)({},S),{},{pageNo:1}))},isJob:!!t,jobOptions:y,pagination:S,changePage:function(e,t){N(Object(fe.a)(Object(fe.a)({},S),{},Object(pe.a)({},e,t)))},labelOptions:Array.from(new Set(g.map((function(e){return e.label})))),hostOptions:Array.from(new Set(g.map((function(e){return e.sourceHostname||e.hostName})))),sourceOptions:Array.from(new Set(g.map((function(e){return e.sourceType})))),severityOptions:Array.from(new Set(g.map((function(e){return e.severity})))),loading:c,reverseEvents:function(){v(Object(Oa.a)(g.reverse()))},nodeMap:n}}(e),a=n.events,o=n.changeFilter,c=n.isJob,s=n.jobOptions,m=n.pagination,d=n.changePage,b=n.labelOptions,g=n.hostOptions,v=n.sourceOptions,E=n.severityOptions,y=n.loading,j=n.reverseEvents,O=n.nodeMap;return y?l.a.createElement(ka.a,null):l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("div",null,l.a.createElement(xa.a,{className:t.search,style:{width:200},options:b,onInputChange:function(e,t){o("label",t.trim())},renderInput:function(e){return l.a.createElement(Xn.a,Object.assign({},e,{label:"Label"}))}}),l.a.createElement(xa.a,{className:t.search,style:{width:200},options:g,onInputChange:function(e,t){o("sourceHostname",t.trim())},renderInput:function(e){return l.a.createElement(Xn.a,Object.assign({},e,{label:"Host"}))}}),l.a.createElement(xa.a,{className:t.search,style:{width:100},options:v,onInputChange:function(e,t){o("sourceType",t.trim())},renderInput:function(e){return l.a.createElement(Xn.a,Object.assign({},e,{label:"Source"}))}}),l.a.createElement(xa.a,{className:t.search,style:{width:140},options:E,onInputChange:function(e,t){o("severity",t.trim())},renderInput:function(e){return l.a.createElement(Xn.a,Object.assign({},e,{label:"Severity"}))}}),!c&&l.a.createElement(xa.a,{className:t.search,style:{width:100},options:s,onInputChange:function(e,t){o("jobId",t.trim())},renderInput:function(e){return l.a.createElement(Xn.a,Object.assign({},e,{label:"Job"}))}}),l.a.createElement(Xn.a,{className:t.search,label:"Msg",InputProps:{onChange:function(e){var t=e.target.value;o("message",t.trim())},endAdornment:l.a.createElement(Sa.a,{position:"end"},l.a.createElement(Ca.a,null))}}),l.a.createElement(Xn.a,{className:t.search,label:"Page Size",InputProps:{onChange:function(e){var t=e.target.value;d("pageSize",Math.min(Number(t),500)||10)},value:m.pageSize}}),l.a.createElement(h.a,{className:t.search,onClick:function(){return j()}},"Reverse")),l.a.createElement("div",null,l.a.createElement(wa.a,{count:m.total,page:m.pageNo,onChange:function(e,t){d("pageNo",t)}})),l.a.createElement("div",{className:t.pageMeta},a.length?a.map((function(e){var n=e.label,a=e.message,r=e.timestamp,o=e.timeStamp,c=e.sourceType,i=e.sourceHostname,s=e.hostName,m=e.sourcePid,d=e.pid,p=e.eventId,f=e.jobId,b=e.jobName,g=e.nodeId,v=e.severity,h=e.customFields,E=o||Ia()(Math.floor(1e3*r)).format("YYYY-MM-DD HH:mm:ss"),y=i||s,j=d||m;return l.a.createElement("article",{className:t.li,key:p},l.a.createElement(ae.a,{container:!0,spacing:4},l.a.createElement(ae.a,{item:!0},l.a.createElement(Da.a,{status:n,type:v})),l.a.createElement(ae.a,{item:!0},E),h&&l.a.createElement(ae.a,{item:!0},l.a.createElement(ue.a,{interactive:!0,title:l.a.createElement("pre",{style:{whiteSpace:"pre-wrap"}},JSON.stringify(h,null,2))},l.a.createElement(Na.a,{size:"small",label:"CustomFields"})))),l.a.createElement(ae.a,{container:!0},l.a.createElement(ae.a,{item:!0,className:t.infokv},"severity: ",v),l.a.createElement(ae.a,{item:!0,className:t.infokv},"source: ",c),l.a.createElement(ae.a,{item:!0,className:t.infokv},"hostname:"," ",O[y]?l.a.createElement(u.b,{to:"/node/".concat(O[y])},y):y),l.a.createElement(ae.a,{item:!0,className:t.infokv},"pid: ",j),f&&l.a.createElement(ae.a,{item:!0,className:t.infokv},"jobId: ",l.a.createElement(u.b,{to:"/job/".concat(f)},f)),b&&l.a.createElement(ae.a,{item:!0,className:t.infokv},"jobId: ",b),p&&l.a.createElement(ae.a,{item:!0,className:t.infokv},"eventId: ",p),g&&l.a.createElement(ae.a,{item:!0,className:t.infokv},"nodeId: ",g)),l.a.createElement(Ma.a,{content:a,language:"prolog"}))})):"No Events Yet."),l.a.createElement("div",null,l.a.createElement(wa.a,{count:m.total,page:m.pageNo,onChange:function(e,t){d("pageNo",t)}})))},Wa=n(106),Ua=Object(b.a)((function(e){return{root:{padding:e.spacing(2)}}})),Ba=function(){var e=Ua();return l.a.createElement("div",{className:e.root},l.a.createElement(Wa.a,{title:"Event"},l.a.createElement(Pa,null)))},Ga=n(129),_a=function(){return l.a.createElement("div",{style:{height:"100vh",width:"100vw"}},l.a.createElement("div",{style:{margin:"250px auto 0 auto",textAlign:"center",fontSize:40,fontWeight:500}},l.a.createElement("img",{src:Ga.a,alt:"Loading",width:100}),l.a.createElement("br",null),"Loading..."))},Ha=n(111),Va=Object(Xe.a)({reducer:{dashboard:$e},devTools:!1}),Ja=n(94),qa=n(484),Ya=n(91),Ka=n(486),Xa=n(147),Qa={typography:{fontSize:12,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},props:{MuiPaper:{elevation:0}}},Za=Object(Xa.a)(Object(fe.a)(Object(fe.a)({},Qa),{},{palette:{primary:Ja.a,secondary:qa.a,text:{primary:Ya.a[900],secondary:Ya.a[800],disabled:Ya.a[400],hint:Ya.a[300]},background:{paper:"#fff",default:Ka.a[50]}}})),$a=Object(Xa.a)(Object(fe.a)(Object(fe.a)({},Qa),{},{palette:{primary:Ja.a,secondary:qa.a,text:{primary:Ka.a[50],secondary:Ka.a[100],disabled:Ka.a[200],hint:Ka.a[300]},background:{paper:Ya.a[800],default:Ya.a[900]}}})),er=l.a.lazy((function(){return n.e(5).then(n.bind(null,522))})),tr=l.a.lazy((function(){return n.e(10).then(n.bind(null,523))})),nr=l.a.lazy((function(){return n.e(8).then(n.bind(null,524))})),ar=l.a.lazy((function(){return n.e(7).then(n.bind(null,525))})),rr=l.a.lazy((function(){return n.e(3).then(n.bind(null,526))})),or=l.a.lazy((function(){return n.e(11).then(n.bind(null,520))})),cr=l.a.lazy((function(){return n.e(9).then(n.bind(null,527))})),ir=l.a.lazy((function(){return n.e(6).then(n.bind(null,521))})),lr=l.a.lazy((function(){return n.e(4).then(n.bind(null,528))})),sr="ray-dashboard-theme",ur=l.a.createContext({nodeMap:{},ipLogMap:{},namespaceMap:{}}),mr=function(){return function(e){var t=window.localStorage.getItem(e);try{return JSON.parse(t||"")}catch(n){return t}}(sr)||"light"},dr=function(e){return t=sr,n=e,window.localStorage.setItem(t,JSON.stringify(n));var t,n};t.b=function(){var e,t=Object(i.useState)(mr()),n=Object(r.a)(t,2),a=n[0],d=n[1],p=Object(i.useState)({nodeMap:{},ipLogMap:{},namespaceMap:{}}),f=Object(r.a)(p,2),b=f[0],g=f[1],v=function(e){dr(e),d(e)};return Object(i.useEffect)((function(){Object(Ha.b)().then((function(e){var t,n;if(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.summary){var a={},r={};e.data.data.summary.forEach((function(e){var t=e.hostname,n=e.raylet,o=e.ip,c=e.logUrl;a[t]=n.nodeId,r[o]=c})),g({nodeMap:a,ipLogMap:r,namespaceMap:{}})}}))}),[]),l.a.createElement(c.a,{theme:(e=a,"dark"===e?$a:Za)},l.a.createElement(i.Suspense,{fallback:_a},l.a.createElement(ur.Provider,{value:b},l.a.createElement(s.a,{store:Va},l.a.createElement(o.a,null),l.a.createElement(u.a,null,l.a.createElement(m.c,null,l.a.createElement(m.a,{component:ja,exact:!0,path:"/"}),l.a.createElement(m.a,{render:function(e){return l.a.createElement(or,Object.assign({},e,{setTheme:v,theme:a}),l.a.createElement(m.a,{component:nr,exact:!0,path:"/summary"}),l.a.createElement(m.a,{component:ar,exact:!0,path:"/job"}),l.a.createElement(m.a,{component:ir,exact:!0,path:"/node"}),l.a.createElement(m.a,{component:er,exact:!0,path:"/actors"}),l.a.createElement(m.a,{component:Ba,exact:!0,path:"/events"}),l.a.createElement(m.a,{render:function(e){return l.a.createElement(cr,Object.assign({},e,{theme:a}))},exact:!0,path:"/log/:host?/:path?"}),l.a.createElement(m.a,{component:lr,path:"/node/:id"}),l.a.createElement(m.a,{component:rr,path:"/job/:id"}),l.a.createElement(m.a,{component:tr,path:"/cmd/:cmd/:ip/:pid"}),l.a.createElement(m.a,{component:_a,exact:!0,path:"/loading"}))}})))))))}}},[[158,1,2]]]);
//# sourceMappingURL=main.73cb1aa0.chunk.js.map